<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exemple - Injection d'objets complexes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .form-container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        h1, h2 {
            color: #333;
            text-align: center;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            box-sizing: border-box;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
        }
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
        }
        .submit-btn:hover {
            background-color: #45a049;
        }
        .section-title {
            background-color: #e8f5e8;
            padding: 10px;
            border-left: 4px solid #4CAF50;
            margin: 20px 0 10px 0;
            font-weight: bold;
        }
        .code-example {
            background-color: #f8f8f8;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .note {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .example-section {
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
    <h1>üöÄ Framework Web - Injection d'objets complexes</h1>

    <div class="note">
        <strong>üìã Comment √ßa marche :</strong> Ce framework peut automatiquement cr√©er et populer des objets Java complexes √† partir des donn√©es de formulaire HTML. Les champs de formulaire utilisent une notation point√©e (comme <code>emp.nom</code>, <code>emp.dept.nom</code>) pour mapper directement aux propri√©t√©s des objets Java.
    </div>

    <!-- Exemple 1: Objet simple -->
    <div class="example-section">
        <div class="form-container">
            <h2>üìù Exemple 1: Cr√©ation d'un d√©partement</h2>

            <div class="section-title">Formulaire HTML</div>
            <form method="POST" action="/departments">
                <div class="form-group">
                    <label for="dept-nom">Nom du d√©partement:</label>
                    <input type="text" id="dept-nom" name="dept.nom" value="Ressources Humaines" required>
                </div>

                <div class="form-group">
                    <label for="dept-code">Code d√©partement:</label>
                    <input type="text" id="dept-code" name="dept.code" value="RH" required>
                </div>

                <div class="form-group">
                    <label for="dept-description">Description:</label>
                    <textarea id="dept-description" name="dept.description" rows="3">Gestion des ressources humaines et du personnel</textarea>
                </div>

                <div class="form-group">
                    <label for="dept-id">ID (optionnel):</label>
                    <input type="number" id="dept-id" name="dept.id" value="1">
                </div>

                <button type="submit" class="submit-btn">üíæ Cr√©er le d√©partement</button>
            </form>

            <div class="section-title">M√©thode du contr√¥leur correspondante</div>
            <div class="code-example">
@POST("/departments")
public ModelView createDepartment(Departement dept) {
    // L'objet dept est automatiquement cr√©√© et popul√©
    // √† partir des param√®tres dept.nom, dept.code, etc.

    System.out.println("D√©partement re√ßu: " + dept);
    // dept.getNom() = "Ressources Humaines"
    // dept.getCode() = "RH"
    // dept.getDescription() = "Gestion des ressources humaines..."
    // dept.getId() = 1

    return new ModelView("department-created.jsp");
}
            </div>
        </div>
    </div>

    <!-- Exemple 2: Objets imbriqu√©s -->
    <div class="example-section">
        <div class="form-container">
            <h2>üë• Exemple 2: Cr√©ation d'un employ√© avec d√©partement (objets imbriqu√©s)</h2>

            <div class="section-title">Formulaire HTML</div>
            <form method="POST" action="/employees">
                <div class="section-title">Informations de l'employ√©</div>
                <div class="form-group">
                    <label for="emp-nom">Nom complet:</label>
                    <input type="text" id="emp-nom" name="emp.nom" value="Jean Dupont" required>
                </div>

                <div class="form-group">
                    <label for="emp-poste">Poste:</label>
                    <input type="text" id="emp-poste" name="emp.poste" value="D√©veloppeur Senior" required>
                </div>

                <div class="form-group">
                    <label for="emp-salaire">Salaire:</label>
                    <input type="number" id="emp-salaire" name="emp.salaire" value="65000" step="1000">
                </div>

                <div class="form-group">
                    <label for="emp-id">ID employ√©:</label>
                    <input type="number" id="emp-id" name="emp.id" value="123">
                </div>

                <div class="section-title">D√©partement de l'employ√©</div>
                <div class="form-group">
                    <label for="emp-dept-nom">Nom du d√©partement:</label>
                    <input type="text" id="emp-dept-nom" name="emp.dept.nom" value="Informatique" required>
                </div>

                <div class="form-group">
                    <label for="emp-dept-code">Code d√©partement:</label>
                    <input type="text" id="emp-dept-code" name="emp.dept.code" value="IT" required>
                </div>

                <div class="form-group">
                    <label for="emp-dept-description">Description d√©partement:</label>
                    <input type="text" id="emp-dept-description" name="emp.dept.description" value="D√©partement informatique">
                </div>

                <div class="form-group">
                    <label for="emp-dept-id">ID d√©partement:</label>
                    <input type="number" id="emp-dept-id" name="emp.dept.id" value="2">
                </div>

                <button type="submit" class="submit-btn">üë§ Cr√©er l'employ√©</button>
            </form>

            <div class="section-title">M√©thode du contr√¥leur correspondante</div>
            <div class="code-example">
@POST("/employees")
public ModelView createEmployee(Employe emp) {
    // L'objet emp est automatiquement cr√©√© avec toutes ses propri√©t√©s
    // Y compris l'objet Departement imbriqu√© (emp.dept)

    System.out.println("Employ√©: " + emp.getNom());
    System.out.println("Poste: " + emp.getPoste());
    System.out.println("Salaire: " + emp.getSalaire());
    System.out.println("D√©partement: " + emp.getDept().getNom());
    System.out.println("Code dept: " + emp.getDept().getCode());

    // L'objet emp.dept a √©t√© automatiquement cr√©√© et popul√© !

    return new ModelView("employee-created.jsp");
}
            </div>
        </div>
    </div>

    <!-- Exemple 3: Combinaison avec Map -->
    <div class="example-section">
        <div class="form-container">
            <h2>üó∫Ô∏è Exemple 3: Combinaison objet + Map (pour donn√©es suppl√©mentaires)</h2>

            <div class="section-title">Formulaire HTML</div>
            <form method="POST" action="/employees/advanced">
                <div class="form-group">
                    <label for="adv-emp-nom">Nom de l'employ√©:</label>
                    <input type="text" id="adv-emp-nom" name="emp.nom" value="Marie Martin" required>
                </div>

                <div class="form-group">
                    <label for="adv-emp-poste">Poste:</label>
                    <input type="text" id="adv-emp-poste" name="emp.poste" value="Chef de projet" required>
                </div>

                <div class="form-group">
                    <label for="adv-emp-salaire">Salaire:</label>
                    <input type="number" id="adv-emp-salaire" name="emp.salaire" value="75000">
                </div>

                <div class="section-title">Donn√©es suppl√©mentaires</div>
                <div class="form-group">
                    <label for="extra-info">Informations suppl√©mentaires:</label>
                    <textarea id="extra-info" name="extraInfo" rows="2">Employ√©e exp√©riment√©e, excellente communication</textarea>
                </div>

                <div class="form-group">
                    <label for="priority">Priorit√© de traitement:</label>
                    <select id="priority" name="priority">
                        <option value="low">Basse</option>
                        <option value="normal">Normale</option>
                        <option value="high" selected>√âlev√©e</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" name="sendEmail" value="true" checked>
                        Envoyer un email de confirmation
                    </label>
                </div>

                <div class="form-group">
                    <label for="comments">Commentaires:</label>
                    <textarea id="comments" name="comments" rows="3">Recrutement urgent pour projet strat√©gique</textarea>
                </div>

                <button type="submit" class="submit-btn">üöÄ Traitement avanc√©</button>
            </form>

            <div class="section-title">M√©thode du contr√¥leur correspondante</div>
            <div class="code-example">
@POST("/employees/advanced")
public ModelView processAdvanced(Employe emp, Map&lt;String, Object&gt; allData) {
    // emp contient les donn√©es de l'employ√© (emp.nom, emp.poste, emp.salaire)
    // allData contient TOUS les param√®tres du formulaire

    System.out.println("Employ√©: " + emp);
    System.out.println("Toutes les donn√©es:");

    String extraInfo = (String) allData.get("extraInfo");
    String priority = (String) allData.get("priority");
    Boolean sendEmail = (Boolean) allData.get("sendEmail");
    String comments = (String) allData.get("comments");

    // Vous avez acc√®s √† la fois √† l'objet structur√© ET √† tous les param√®tres !

    return new ModelView("employee-advanced.jsp");
}
            </div>
        </div>
    </div>

    <div class="note">
        <strong>‚ú® Avantages de cette approche :</strong>
        <ul>
            <li><strong>Simplicit√© :</strong> Plus besoin d'extraire manuellement les param√®tres de requ√™te</li>
            <li><strong>Type Safety :</strong> Objets Java typ√©s au lieu de cha√Ænes de caract√®res</li>
            <li><strong>Objets imbriqu√©s :</strong> Support automatique des relations complexes</li>
            <li><strong>Flexibilit√© :</strong> Combinaison possible avec Map pour donn√©es suppl√©mentaires</li>
            <li><strong>Conversion automatique :</strong> String ‚Üí int, boolean, double, etc.</li>
        </ul>
    </div>
</body>
</html>

