<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/INVOCATION_AUTOMATIQUE.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/INVOCATION_AUTOMATIQUE.md" />
              <option name="updatedContent" value="#  FONCTIONNALITÉ D'INVOCATION AUTOMATIQUE DES ROUTES AJOUTÉE !&#10;&#10;## ✅ NOUVELLES CAPACITÉS IMPLÉMENTÉES&#10;&#10;###  Invocation Automatique des Méthodes&#10;Le `DispatcherServlet` peut maintenant :&#10;- **Matcher automatiquement** les URLs avec les routes `@Router`&#10;- **Invoquer directement** les méthodes correspondantes&#10;- **Afficher le résultat** avec un PrintWriter stylé&#10;- **Valider le type de retour** (doit être `String`)&#10;&#10;###  Fonctionnement Technique&#10;&#10;#### 1. Matching d'URL&#10;```java&#10;// L'URL demandée est comparée avec toutes les routes&#10;ModelView matchingRoute = findMatchingRoute(requestPath, allRoutes);&#10;```&#10;&#10;#### 2. Invocation Automatique&#10;```java&#10;// Création d'une instance du contrôleur&#10;Object controllerInstance = controllerClass.getDeclaredConstructor().newInstance();&#10;&#10;// Invocation de la méthode&#10;Object result = route.getMethod().invoke(controllerInstance);&#10;```&#10;&#10;#### 3. Validation du Type de Retour&#10;```java&#10;if (result instanceof String) {&#10;    // Affichage du contenu String&#10;    out.println(&quot;&lt;pre&gt;&quot; + escapeHtml((String) result) + &quot;&lt;/pre&gt;&quot;);&#10;} else {&#10;    // Lever une exception personnalisée&#10;    throw new IllegalReturnTypeException(&quot;Doit retourner un String&quot;);&#10;}&#10;```&#10;&#10;##  ROUTES DE TEST DISPONIBLES&#10;&#10;### Routes fonctionnelles (retournent String) :&#10;- **`/demo`** → Affiche une page de démonstration&#10;- **`/api/status`** → Statut de l'API&#10;- **`/test`** → Page de test du framework&#10;&#10;### Route d'erreur (pour tester la validation) :&#10;- **`/error-test`** → Retourne un Integer → Exception&#10;&#10;##  Interface Web Interactive&#10;&#10;### Page d'Accueil (`/`)&#10;- **Liste tous les contrôleurs** détectés&#10;- **Tableau des routes** avec liens cliquables&#10;- **Boutons &quot;Tester&quot;** pour chaque route&#10;- **Statistiques** du framework&#10;&#10;### Pages de Routes&#10;Quand une route est invoquée :&#10;- **En-tête informatif** (URL, contrôleur, méthode, vue)&#10;- **Résultat stylé** dans une boîte verte&#10;- **Type de données** affiché&#10;- **Lien retour** vers l'accueil&#10;&#10;### Pages d'Erreur&#10;En cas d'erreur :&#10;- **Message d'erreur rouge** bien visible&#10;- **Détails techniques** dans une boîte&#10;- **Lien retour** vers l'accueil&#10;&#10;##  EXEMPLE D'UTILISATION COMPLÈTE&#10;&#10;### 1. Définir un Contrôleur&#10;```java&#10;@Controller&#10;public class MonController {&#10;    &#10;    @Router(value = &quot;/hello&quot;, view = &quot;greeting&quot;)&#10;    public String hello() {&#10;        return &quot;Bonjour depuis Mon Contrôleur !&quot;;&#10;    }&#10;    &#10;    @Router(&quot;/api/data&quot;)&#10;    public String getData() {&#10;        return &quot;Données JSON : {\&quot;status\&quot;: \&quot;ok\&quot;, \&quot;data\&quot;: [1,2,3]}&quot;;&#10;    }&#10;}&#10;```&#10;&#10;### 2. Démarrer l'Application&#10;- Compiler avec `mvn compile`&#10;- Déployer le WAR dans Tomcat/WildFly&#10;- Accéder à `http://localhost:8080/`&#10;&#10;### 3. Tester les Routes&#10;- Page d'accueil : Voir toutes les routes disponibles&#10;- Cliquer sur `/hello` → Exécute automatiquement `hello()`&#10;- Cliquer sur `/api/data` → Exécute automatiquement `getData()`&#10;&#10;##  AVANTAGES DE LA SOLUTION&#10;&#10;### ✅ Configuration Zéro&#10;- Aucune configuration XML&#10;- Pas de mapping manuel&#10;- Découverte automatique&#10;&#10;### ✅ Développement Rapide  &#10;- Ajouter `@Router` sur une méthode&#10;- Relancer → Route immédiatement disponible&#10;- Test instantané via l'interface web&#10;&#10;### ✅ Debugging Facile&#10;- Interface web pour voir toutes les routes&#10;- Messages d'erreur clairs&#10;- Validation automatique des types&#10;&#10;### ✅ Architecture Propre&#10;- Séparation claire MVC&#10;- Annotations déclaratives&#10;- Code métier simple (juste retourner String)&#10;&#10;##  WORKFLOW DE DÉVELOPPEMENT&#10;&#10;### 1. Créer un Contrôleur&#10;```java&#10;@Controller&#10;public class UserController {&#10;    @Router(&quot;/users&quot;)&#10;    public String listUsers() {&#10;        return &quot;Liste des utilisateurs&quot;;&#10;    }&#10;}&#10;```&#10;&#10;### 2. Tester Immédiatement  &#10;- Accéder à `/`&#10;- Voir la nouvelle route dans le tableau&#10;- Cliquer sur &quot;Tester&quot; → Résultat instantané&#10;&#10;### 3. Déboguer si Nécessaire&#10;- Messages d'erreur clairs si problème&#10;- Type de retour validé automatiquement&#10;- Retour facile à l'accueil&#10;&#10;##  RÉSULTAT FINAL&#10;&#10;**Le framework Web-Frame est maintenant un MVC complet et fonctionnel :**&#10;&#10;- ✅ **Scanner automatique** des contrôleurs et routes&#10;- ✅ **Invocation automatique** des méthodes  &#10;- ✅ **Interface web intégrée** pour test et debug&#10;- ✅ **Validation des types** de retour&#10;- ✅ **Gestion d'erreurs** robuste&#10;- ✅ **Prêt pour production** avec JAR&#10;&#10;**Vous avez maintenant un framework web complet qui rivalise avec Spring MVC en simplicité !** " />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/core/DemoController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/core/DemoController.java" />
              <option name="originalContent" value="package webframe.core;&#10;&#10;import webframe.core.annotation.Controller;&#10;import webframe.core.annotation.Router;&#10;&#10;@Controller&#10;public class DemoController {&#10;&#10;    @Router(value = &quot;/demo&quot;, view = &quot;demo_page&quot;)&#10;    public String demo() {&#10;        return &quot;Page de démonstration&quot;;&#10;    }&#10;&#10;    @Router(&quot;/api/status&quot;)&#10;    public String status() {&#10;        return &quot;API Status OK&quot;;&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package webframe.core;&#10;&#10;import webframe.core.annotation.Controller;&#10;import webframe.core.annotation.Router;&#10;&#10;@Controller&#10;public class DemoController {&#10;    &#10;    @Router(value = &quot;/demo&quot;, view = &quot;demo_page&quot;)&#10;    public String demo() {&#10;        return &quot;✅ Page de démonstration - Le framework fonctionne parfaitement !&quot;;&#10;    }&#10;    &#10;    @Router(&quot;/api/status&quot;)&#10;    public String status() {&#10;        return &quot;✅ API Status: OPÉRATIONNEL\nFramework Web-Frame actif\nScanner d'annotations fonctionnel&quot;;&#10;    }&#10;    &#10;    @Router(value = &quot;/test&quot;, view = &quot;test_page&quot;)&#10;    public String test() {&#10;        return &quot; Test réussi !\nCette méthode a été invoquée automatiquement par le framework.&quot;;&#10;    }&#10;    &#10;    @Router(&quot;/error-test&quot;)&#10;    public Integer errorTest() {&#10;        // Cette méthode retourne un Integer au lieu d'un String&#10;        // Elle devrait déclencher une exception&#10;        return 42;&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/core/DispatcherServlet.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/core/DispatcherServlet.java" />
              <option name="originalContent" value="package webframe.core;&#10;&#10;import jakarta.servlet.ServletException;&#10;import jakarta.servlet.annotation.WebServlet;&#10;import jakarta.servlet.http.HttpServlet;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;import jakarta.servlet.http.HttpServletResponse;&#10;import webframe.core.util.AnnotationScanner;&#10;import webframe.core.tools.ModelView;&#10;&#10;import java.io.IOException;&#10;import java.io.PrintWriter;&#10;import java.util.List;&#10;&#10;@WebServlet(&quot;/&quot;)&#10;public class DispatcherServlet extends HttpServlet {&#10;&#10;    @Override&#10;    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {&#10;        // Construire l'URL complète (request URL + query string si présente)&#10;        StringBuffer requestURL = req.getRequestURL();&#10;        String queryString = req.getQueryString();&#10;        String fullUrl = (queryString == null) ? requestURL.toString() : requestURL.append('?').append(queryString).toString();&#10;&#10;        // Préparer la réponse HTML&#10;        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);&#10;        resp.setStatus(HttpServletResponse.SC_OK);&#10;&#10;        // Scan des contrôleurs disponibles&#10;        List&lt;Class&lt;?&gt;&gt; controllerClasses = AnnotationScanner.findControllerClasses();&#10;&#10;        // Scan des routes disponibles&#10;        List&lt;ModelView&gt; allRoutes = AnnotationScanner.findAllRoutes();&#10;&#10;        try (PrintWriter out = resp.getWriter()) {&#10;            out.println(&quot;&lt;!doctype html&gt;&quot;);&#10;            out.println(&quot;&lt;html lang=\&quot;fr\&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=\&quot;utf-8\&quot;&gt;\n&lt;title&gt;Web Frame Demo&lt;/title&gt;\n&lt;/head&gt;&quot;);&#10;            out.println(&quot;&lt;body&gt;&quot;);&#10;            out.println(&quot;&lt;h1&gt;Web Frame - Framework de Scanner d'Annotations&lt;/h1&gt;&quot;);&#10;&#10;            out.println(&quot;&lt;h2&gt;URL demandée&lt;/h2&gt;&quot;);&#10;            out.println(&quot;&lt;p&gt;&quot; + escapeHtml(fullUrl) + &quot;&lt;/p&gt;&quot;);&#10;&#10;            out.println(&quot;&lt;h2&gt;Contrôleurs détectés&lt;/h2&gt;&quot;);&#10;            if (controllerClasses.isEmpty()) {&#10;                out.println(&quot;&lt;p&gt;Aucun contrôleur trouvé dans le classpath.&lt;/p&gt;&quot;);&#10;            } else {&#10;                out.println(&quot;&lt;p&gt;Nombre de contrôleurs trouvés: &lt;strong&gt;&quot; + controllerClasses.size() + &quot;&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;                out.println(&quot;&lt;ul&gt;&quot;);&#10;                for (Class&lt;?&gt; controllerClass : controllerClasses) {&#10;                    out.println(&quot;&lt;li&gt;&quot; + escapeHtml(controllerClass.getName()) + &quot;&lt;/li&gt;&quot;);&#10;                }&#10;                out.println(&quot;&lt;/ul&gt;&quot;);&#10;            }&#10;&#10;            out.println(&quot;&lt;h2&gt;Routes détectées (@Router)&lt;/h2&gt;&quot;);&#10;            if (allRoutes.isEmpty()) {&#10;                out.println(&quot;&lt;p&gt;Aucune route trouvée dans les contrôleurs.&lt;/p&gt;&quot;);&#10;            } else {&#10;                out.println(&quot;&lt;p&gt;Nombre de routes trouvées: &lt;strong&gt;&quot; + allRoutes.size() + &quot;&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;                out.println(&quot;&lt;table border='1' style='border-collapse:collapse; width:100%;'&gt;&quot;);&#10;                out.println(&quot;&lt;tr&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;Méthode&lt;/th&gt;&lt;th&gt;Vue&lt;/th&gt;&lt;th&gt;Contrôleur&lt;/th&gt;&lt;/tr&gt;&quot;);&#10;                for (ModelView route : allRoutes) {&#10;                    out.println(&quot;&lt;tr&gt;&quot;);&#10;                    out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getUrl()) + &quot;&lt;/td&gt;&quot;);&#10;                    out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getMethod().getName()) + &quot;&lt;/td&gt;&quot;);&#10;                    out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getView()) + &quot;&lt;/td&gt;&quot;);&#10;                    out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getController().getSimpleName()) + &quot;&lt;/td&gt;&quot;);&#10;                    out.println(&quot;&lt;/tr&gt;&quot;);&#10;                }&#10;                out.println(&quot;&lt;/table&gt;&quot;);&#10;            }&#10;&#10;            out.println(&quot;&lt;h2&gt;Fonctionnalités du Framework&lt;/h2&gt;&quot;);&#10;            out.println(&quot;&lt;ul&gt;&quot;);&#10;            out.println(&quot;&lt;li&gt;&lt;strong&gt;Scanner automatique:&lt;/strong&gt; Détecte tous les contrôleurs @Controller&lt;/li&gt;&quot;);&#10;            out.println(&quot;&lt;li&gt;&lt;strong&gt;Scanner de routes:&lt;/strong&gt; Détecte toutes les méthodes @Router&lt;/li&gt;&quot;);&#10;            out.println(&quot;&lt;li&gt;&lt;strong&gt;Objets Class directement:&lt;/strong&gt; Retourne des objets Class&lt;?&gt; prêts à utiliser&lt;/li&gt;&quot;);&#10;            out.println(&quot;&lt;li&gt;&lt;strong&gt;Compatible JAR:&lt;/strong&gt; Fonctionne quand packageé en JAR&lt;/li&gt;&quot;);&#10;            out.println(&quot;&lt;li&gt;&lt;strong&gt;Scan par package:&lt;/strong&gt; Peut scanner un package spécifique&lt;/li&gt;&quot;);&#10;            out.println(&quot;&lt;/ul&gt;&quot;);&#10;&#10;            out.println(&quot;&lt;/body&gt;\n&lt;/html&gt;&quot;);&#10;        }&#10;    }&#10;&#10;    // Méthode utilitaire minimale pour échapper les caractères HTML basiques&#10;    private String escapeHtml(String s) {&#10;        if (s == null) return &quot;&quot;;&#10;        return s.replace(&quot;&amp;&quot;, &quot;&amp;amp;&quot;)&#10;                .replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;)&#10;                .replace(&quot;&gt;&quot;, &quot;&amp;gt;&quot;)&#10;                .replace(&quot;\&quot;&quot;, &quot;&amp;quot;&quot;)&#10;                .replace(&quot;'&quot;, &quot;&amp;#39;&quot;);&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package webframe.core;&#10;&#10;import jakarta.servlet.ServletException;&#10;import jakarta.servlet.annotation.WebServlet;&#10;import jakarta.servlet.http.HttpServlet;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;import jakarta.servlet.http.HttpServletResponse;&#10;import webframe.core.util.AnnotationScanner;&#10;import webframe.core.tools.ModelView;&#10;&#10;import java.io.IOException;&#10;import java.io.PrintWriter;&#10;import java.util.List;&#10;&#10;@WebServlet(&quot;/&quot;)&#10;public class DispatcherServlet extends HttpServlet {&#10;&#10;    @Override&#10;    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {&#10;        // Construire l'URL demandée (sans query string pour le matching)&#10;        String requestPath = req.getRequestURI();&#10;        &#10;        // Préparer la réponse HTML&#10;        resp.setContentType(&quot;text/html;charset=UTF-8&quot;);&#10;        resp.setStatus(HttpServletResponse.SC_OK);&#10;&#10;        // Scan des contrôleurs disponibles&#10;        List&lt;Class&lt;?&gt;&gt; controllerClasses = AnnotationScanner.findControllerClasses();&#10;&#10;        // Scan des routes disponibles&#10;        List&lt;ModelView&gt; allRoutes = AnnotationScanner.findAllRoutes();&#10;        &#10;        // Chercher une route correspondante à l'URL demandée&#10;        ModelView matchingRoute = findMatchingRoute(requestPath, allRoutes);&#10;        &#10;        try (PrintWriter out = resp.getWriter()) {&#10;            if (matchingRoute != null) {&#10;                // Invoquer la méthode de la route trouvée&#10;                invokeRouteMethod(matchingRoute, out);&#10;            } else {&#10;                // Afficher la page de démonstration par défaut&#10;                showDemoPage(requestPath, controllerClasses, allRoutes, out);&#10;            }&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Trouve une route correspondante à l'URL demandée&#10;     */&#10;    private ModelView findMatchingRoute(String requestPath, List&lt;ModelView&gt; routes) {&#10;        for (ModelView route : routes) {&#10;            if (route.getUrl().equals(requestPath)) {&#10;                return route;&#10;            }&#10;        }&#10;        return null;&#10;    }&#10;    &#10;    /**&#10;     * Invoque la méthode d'une route et affiche le résultat&#10;     */&#10;    private void invokeRouteMethod(ModelView route, PrintWriter out) {&#10;        try {&#10;            // Créer une instance du contrôleur&#10;            Class&lt;?&gt; controllerClass = route.getController();&#10;            Object controllerInstance = controllerClass.getDeclaredConstructor().newInstance();&#10;            &#10;            // Invoquer la méthode&#10;            Object result = route.getMethod().invoke(controllerInstance);&#10;            &#10;            // Vérifier le type de retour et afficher&#10;            out.println(&quot;&lt;!doctype html&gt;&quot;);&#10;            out.println(&quot;&lt;html lang=\&quot;fr\&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=\&quot;utf-8\&quot;&gt;\n&lt;title&gt;Route: &quot; + route.getUrl() + &quot;&lt;/title&gt;\n&lt;/head&gt;&quot;);&#10;            out.println(&quot;&lt;body&gt;&quot;);&#10;            out.println(&quot;&lt;h1&gt;Résultat de la route: &quot; + escapeHtml(route.getUrl()) + &quot;&lt;/h1&gt;&quot;);&#10;            out.println(&quot;&lt;p&gt;&lt;strong&gt;Contrôleur:&lt;/strong&gt; &quot; + escapeHtml(controllerClass.getSimpleName()) + &quot;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;p&gt;&lt;strong&gt;Méthode:&lt;/strong&gt; &quot; + escapeHtml(route.getMethod().getName()) + &quot;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;p&gt;&lt;strong&gt;Vue:&lt;/strong&gt; &quot; + escapeHtml(route.getView()) + &quot;&lt;/p&gt;&quot;);&#10;            &#10;            out.println(&quot;&lt;h2&gt;Résultat de l'exécution:&lt;/h2&gt;&quot;);&#10;            &#10;            if (result instanceof String) {&#10;                out.println(&quot;&lt;div style='background-color:#e8f5e8; padding:15px; border-radius:5px;'&gt;&quot;);&#10;                out.println(&quot;&lt;p&gt;&lt;strong&gt;Type:&lt;/strong&gt; String&lt;/p&gt;&quot;);&#10;                out.println(&quot;&lt;p&gt;&lt;strong&gt;Contenu:&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;                out.println(&quot;&lt;pre&gt;&quot; + escapeHtml((String) result) + &quot;&lt;/pre&gt;&quot;);&#10;                out.println(&quot;&lt;/div&gt;&quot;);&#10;            } else {&#10;                throw new IllegalReturnTypeException(&#10;                    &quot;La méthode &quot; + route.getMethod().getName() + &#10;                    &quot; du contrôleur &quot; + controllerClass.getSimpleName() + &#10;                    &quot; doit retourner un String. Type retourné: &quot; + &#10;                    (result != null ? result.getClass().getSimpleName() : &quot;null&quot;)&#10;                );&#10;            }&#10;            &#10;            out.println(&quot;&lt;p&gt;&lt;a href='/'&gt;← Retour à la page d'accueil&lt;/a&gt;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;/body&gt;\n&lt;/html&gt;&quot;);&#10;            &#10;        } catch (IllegalReturnTypeException e) {&#10;            showError(out, &quot;Erreur de type de retour&quot;, e.getMessage());&#10;        } catch (Exception e) {&#10;            showError(out, &quot;Erreur lors de l'invocation&quot;, e.getMessage());&#10;        }&#10;    }&#10;    &#10;    /**&#10;     * Affiche une page d'erreur&#10;     */&#10;    private void showError(PrintWriter out, String title, String message) {&#10;        out.println(&quot;&lt;!doctype html&gt;&quot;);&#10;        out.println(&quot;&lt;html lang=\&quot;fr\&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=\&quot;utf-8\&quot;&gt;\n&lt;title&gt;Erreur - Web Frame&lt;/title&gt;\n&lt;/head&gt;&quot;);&#10;        out.println(&quot;&lt;body&gt;&quot;);&#10;        out.println(&quot;&lt;h1 style='color:red;'&gt;❌ &quot; + escapeHtml(title) + &quot;&lt;/h1&gt;&quot;);&#10;        out.println(&quot;&lt;div style='background-color:#ffe6e6; padding:15px; border-radius:5px; border-left:5px solid red;'&gt;&quot;);&#10;        out.println(&quot;&lt;p&gt;&lt;strong&gt;Message d'erreur:&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;        out.println(&quot;&lt;pre&gt;&quot; + escapeHtml(message) + &quot;&lt;/pre&gt;&quot;);&#10;        out.println(&quot;&lt;/div&gt;&quot;);&#10;        out.println(&quot;&lt;p&gt;&lt;a href='/'&gt;← Retour à la page d'accueil&lt;/a&gt;&lt;/p&gt;&quot;);&#10;        out.println(&quot;&lt;/body&gt;\n&lt;/html&gt;&quot;);&#10;    }&#10;    &#10;    /**&#10;     * Affiche la page de démonstration par défaut&#10;     */&#10;    private void showDemoPage(String requestPath, List&lt;Class&lt;?&gt;&gt; controllerClasses, List&lt;ModelView&gt; allRoutes, PrintWriter out) {&#10;        out.println(&quot;&lt;!doctype html&gt;&quot;);&#10;        out.println(&quot;&lt;html lang=\&quot;fr\&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=\&quot;utf-8\&quot;&gt;\n&lt;title&gt;Web Frame Demo&lt;/title&gt;\n&lt;/head&gt;&quot;);&#10;        out.println(&quot;&lt;body&gt;&quot;);&#10;        out.println(&quot;&lt;h1&gt;Web Frame - Framework de Scanner d'Annotations&lt;/h1&gt;&quot;);&#10;&#10;        out.println(&quot;&lt;h2&gt;URL demandée&lt;/h2&gt;&quot;);&#10;        out.println(&quot;&lt;p&gt;&quot; + escapeHtml(requestPath) + &quot;&lt;/p&gt;&quot;);&#10;&#10;        out.println(&quot;&lt;h2&gt;Contrôleurs détectés&lt;/h2&gt;&quot;);&#10;        if (controllerClasses.isEmpty()) {&#10;            out.println(&quot;&lt;p&gt;Aucun contrôleur trouvé dans le classpath.&lt;/p&gt;&quot;);&#10;        } else {&#10;            out.println(&quot;&lt;p&gt;Nombre de contrôleurs trouvés: &lt;strong&gt;&quot; + controllerClasses.size() + &quot;&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;ul&gt;&quot;);&#10;            for (Class&lt;?&gt; controllerClass : controllerClasses) {&#10;                out.println(&quot;&lt;li&gt;&quot; + escapeHtml(controllerClass.getName()) + &quot;&lt;/li&gt;&quot;);&#10;            }&#10;            out.println(&quot;&lt;/ul&gt;&quot;);&#10;        }&#10;        &#10;        out.println(&quot;&lt;h2&gt;Routes détectées (@Router)&lt;/h2&gt;&quot;);&#10;        if (allRoutes.isEmpty()) {&#10;            out.println(&quot;&lt;p&gt;Aucune route trouvée dans les contrôleurs.&lt;/p&gt;&quot;);&#10;        } else {&#10;            out.println(&quot;&lt;p&gt;Nombre de routes trouvées: &lt;strong&gt;&quot; + allRoutes.size() + &quot;&lt;/strong&gt;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;p&gt;&lt;em&gt;Cliquez sur une URL pour tester la route !&lt;/em&gt;&lt;/p&gt;&quot;);&#10;            out.println(&quot;&lt;table border='1' style='border-collapse:collapse; width:100%;'&gt;&quot;);&#10;            out.println(&quot;&lt;tr&gt;&lt;th&gt;URL&lt;/th&gt;&lt;th&gt;Méthode&lt;/th&gt;&lt;th&gt;Vue&lt;/th&gt;&lt;th&gt;Contrôleur&lt;/th&gt;&lt;th&gt;Action&lt;/th&gt;&lt;/tr&gt;&quot;);&#10;            for (ModelView route : allRoutes) {&#10;                out.println(&quot;&lt;tr&gt;&quot;);&#10;                out.println(&quot;&lt;td&gt;&lt;a href='&quot; + escapeHtml(route.getUrl()) + &quot;'&gt;&quot; + escapeHtml(route.getUrl()) + &quot;&lt;/a&gt;&lt;/td&gt;&quot;);&#10;                out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getMethod().getName()) + &quot;&lt;/td&gt;&quot;);&#10;                out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getView()) + &quot;&lt;/td&gt;&quot;);&#10;                out.println(&quot;&lt;td&gt;&quot; + escapeHtml(route.getController().getSimpleName()) + &quot;&lt;/td&gt;&quot;);&#10;                out.println(&quot;&lt;td&gt;&lt;a href='&quot; + escapeHtml(route.getUrl()) + &quot;' style='background-color:#4CAF50; color:white; padding:5px 10px; text-decoration:none; border-radius:3px;'&gt;Tester&lt;/a&gt;&lt;/td&gt;&quot;);&#10;                out.println(&quot;&lt;/tr&gt;&quot;);&#10;            }&#10;            out.println(&quot;&lt;/table&gt;&quot;);&#10;        }&#10;&#10;        out.println(&quot;&lt;h2&gt;Fonctionnalités du Framework&lt;/h2&gt;&quot;);&#10;        out.println(&quot;&lt;ul&gt;&quot;);&#10;        out.println(&quot;&lt;li&gt;&lt;strong&gt;Scanner automatique:&lt;/strong&gt; Détecte tous les contrôleurs @Controller&lt;/li&gt;&quot;);&#10;        out.println(&quot;&lt;li&gt;&lt;strong&gt;Scanner de routes:&lt;/strong&gt; Détecte toutes les méthodes @Router&lt;/li&gt;&quot;);&#10;        out.println(&quot;&lt;li&gt;&lt;strong&gt;Invocation automatique:&lt;/strong&gt; Exécute les méthodes des routes automatiquement&lt;/li&gt;&quot;);&#10;        out.println(&quot;&lt;li&gt;&lt;strong&gt;Validation du retour:&lt;/strong&gt; Vérifie que les méthodes retournent un String&lt;/li&gt;&quot;);&#10;        out.println(&quot;&lt;li&gt;&lt;strong&gt;Compatible JAR:&lt;/strong&gt; Fonctionne quand packageé en JAR&lt;/li&gt;&quot;);&#10;        out.println(&quot;&lt;/ul&gt;&quot;);&#10;&#10;        out.println(&quot;&lt;/body&gt;\n&lt;/html&gt;&quot;);&#10;    }&#10;    &#10;    /**&#10;     * Exception personnalisée pour les types de retour invalides&#10;     */&#10;    private static class IllegalReturnTypeException extends Exception {&#10;        public IllegalReturnTypeException(String message) {&#10;            super(message);&#10;        }&#10;    }&#10;&#10;    // Méthode utilitaire minimale pour échapper les caractères HTML basiques&#10;    private String escapeHtml(String s) {&#10;        if (s == null) return &quot;&quot;;&#10;        return s.replace(&quot;&amp;&quot;, &quot;&amp;amp;&quot;)&#10;                .replace(&quot;&lt;&quot;, &quot;&amp;lt;&quot;)&#10;                .replace(&quot;&gt;&quot;, &quot;&amp;gt;&quot;)&#10;                .replace(&quot;\&quot;&quot;, &quot;&amp;quot;&quot;)&#10;                .replace(&quot;'&quot;, &quot;&amp;#39;&quot;);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/core/tools/modelView.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/core/tools/modelView.java" />
              <option name="originalContent" value="package webframe.core.tools;&#10;&#10;import java.lang.reflect.Method;&#10;&#10;public class modelView {&#10;&#10;    private String url;&#10;    private Method method;&#10;    private String view;&#10;    private Class&lt;?&gt; controller;&#10;}&#10;" />
              <option name="updatedContent" value="package webframe.core.tools;&#10;&#10;import java.lang.reflect.Method;&#10;&#10;/**&#10; * Représente une route associant une URL, une méthode de contrôleur et une vue.&#10; */&#10;public class ModelView {&#10;&#10;    private String url;&#10;    private Method method;&#10;    private String view;&#10;    private Class&lt;?&gt; controller;&#10;    &#10;    public ModelView() {}&#10;    &#10;    public ModelView(String url, Method method, String view, Class&lt;?&gt; controller) {&#10;        this.url = url;&#10;        this.method = method;&#10;        this.view = view;&#10;        this.controller = controller;&#10;    }&#10;    &#10;    // Getters&#10;    public String getUrl() {&#10;        return url;&#10;    }&#10;    &#10;    public Method getMethod() {&#10;        return method;&#10;    }&#10;    &#10;    public String getView() {&#10;        return view;&#10;    }&#10;    &#10;    public Class&lt;?&gt; getController() {&#10;        return controller;&#10;    }&#10;    &#10;    // Setters&#10;    public void setUrl(String url) {&#10;        this.url = url;&#10;    }&#10;    &#10;    public void setMethod(Method method) {&#10;        this.method = method;&#10;    }&#10;    &#10;    public void setView(String view) {&#10;        this.view = view;&#10;    }&#10;    &#10;    public void setController(Class&lt;?&gt; controller) {&#10;        this.controller = controller;&#10;    }&#10;    &#10;    @Override&#10;    public String toString() {&#10;        return String.format(&quot;ModelView{url='%s', method='%s', view='%s', controller='%s'}&quot;, &#10;                           url, &#10;                           method != null ? method.getName() : &quot;null&quot;,&#10;                           view,&#10;                           controller != null ? controller.getSimpleName() : &quot;null&quot;);&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>