<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/README-URL-PARAMETERS.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README-URL-PARAMETERS.md" />
              <option name="updatedContent" value="# Guide d'Utilisation des Paramètres d'URL&#10;&#10;## Fonctionnalité Implémentée&#10;&#10;Les paramètres d'URL (comme `{id}` dans `/user/{id}`) peuvent maintenant être automatiquement captés et utilisés par les méthodes de contrôleur via l'annotation `@RequestParam`, exactement comme les paramètres de requête HTTP classiques.&#10;&#10;## Modifications Apportées&#10;&#10;### 1. ParameterResolver.java&#10;- **Nouvelle méthode** : `resolveParameters(Method, HttpServletRequest, Map&lt;String, String&gt; urlParameters)`&#10;- **Fonctionnalité** : Priorise les paramètres d'URL sur les paramètres de requête HTTP&#10;- **Conversion automatique** : Support des types int, String, boolean, etc.&#10;&#10;### 2. DispatcherServlet.java  &#10;- **Nouvelle méthode** : `extractUrlParametersFromRoute(ModelView route)`&#10;- **Fonctionnalité** : Extrait les paramètres d'URL depuis le ModelView&#10;- **Intégration** : Passe les paramètres d'URL au ParameterResolver&#10;&#10;### 3. UrlPatternMatcher.java (déjà existant)&#10;- **Méthode existante** : `extractParameters(String url, String template)`&#10;- **Fonctionnalité** : Extrait les paramètres des patterns d'URL comme `/user/{id}`&#10;&#10;### 4. ApplicationContext.java (déjà existant)&#10;- **Fonctionnalité existante** : Stocke les paramètres d'URL extraits avec le préfixe `urlParam_`&#10;&#10;## Exemples d'Utilisation&#10;&#10;### Route Basique avec Paramètre d'URL&#10;```java&#10;@Controller&#10;public class UserController {&#10;    &#10;    @Router(value = &quot;/user/{id}&quot;, view = &quot;user-details&quot;)&#10;    public ModelView getUserById(@RequestParam(&quot;id&quot;) String userId) {&#10;        // Le paramètre 'id' de l'URL /user/123 sera automatiquement &#10;        // passé comme &quot;123&quot; à cette méthode&#10;        return new ModelView(&quot;user-details&quot;).addData(&quot;userId&quot;, userId);&#10;    }&#10;}&#10;```&#10;&#10;### Multiples Paramètres d'URL&#10;```java&#10;@Router(value = &quot;/user/{userId}/profile/{profileId}&quot;, view = &quot;user-profile&quot;)&#10;public ModelView getUserProfile(&#10;        @RequestParam(&quot;userId&quot;) String userId, &#10;        @RequestParam(&quot;profileId&quot;) String profileId) {&#10;    &#10;    // URL: /user/456/profile/789&#10;    // userId = &quot;456&quot;, profileId = &quot;789&quot;&#10;    return new ModelView(&quot;user-profile&quot;)&#10;        .addData(&quot;userId&quot;, userId)&#10;        .addData(&quot;profileId&quot;, profileId);&#10;}&#10;```&#10;&#10;### Paramètres Mixtes (URL + Requête HTTP)&#10;```java&#10;@Router(value = &quot;/user/{id}/data&quot;, view = &quot;user-data&quot;)&#10;public ModelView getUserData(&#10;        @RequestParam(&quot;id&quot;) String userId,           // Vient de l'URL&#10;        @RequestParam(&quot;format&quot;) String format) {     // Vient de ?format=json&#10;    &#10;    // URL: /user/123/data?format=xml&#10;    // userId = &quot;123&quot; (depuis l'URL)&#10;    // format = &quot;xml&quot; (depuis la query string)&#10;    return new ModelView(&quot;user-data&quot;)&#10;        .addData(&quot;userId&quot;, userId)&#10;        .addData(&quot;format&quot;, format);&#10;}&#10;```&#10;&#10;### Conversion de Type Automatique&#10;```java&#10;@Router(value = &quot;/user/{id}/age&quot;, view = &quot;user-age&quot;)&#10;public ModelView getUserAge(@RequestParam(&quot;id&quot;) int userId) {&#10;    // Le paramètre String &quot;123&quot; est automatiquement converti en int 123&#10;    return new ModelView(&quot;user-age&quot;)&#10;        .addData(&quot;userId&quot;, userId)&#10;        .addData(&quot;age&quot;, userId * 2 + 20);&#10;}&#10;```&#10;&#10;## Ordre de Priorité&#10;&#10;1. **Paramètres d'URL** (ex: `{id}` dans `/user/{id}`) - **PRIORITÉ HAUTE**&#10;2. **Paramètres de requête HTTP** (ex: `?name=value`) - **PRIORITÉ BASSE**&#10;&#10;Si un paramètre avec le même nom existe dans l'URL ET dans la query string, **la valeur de l'URL sera utilisée**.&#10;&#10;## Types Supportés&#10;&#10;- `String` (par défaut)&#10;- `int` / `Integer`&#10;- `long` / `Long` &#10;- `double` / `Double`&#10;- `float` / `Float`&#10;- `boolean` / `Boolean`&#10;- `short` / `Short`&#10;- `byte` / `Byte`&#10;- `char` / `Character`&#10;&#10;## Tests Effectués&#10;&#10;✅ **Test 1** - Extraction de paramètres d'URL : `/user/123` → `{id: &quot;123&quot;}`&#10;✅ **Test 2** - Multiples paramètres : `/user/456/profile/789` → `{userId: &quot;456&quot;, profileId: &quot;789&quot;}`  &#10;✅ **Test 3** - Conversion de types : `&quot;999&quot;` → `999` (int)&#10;✅ **Test 4** - Intégration complète avec ApplicationContext et DispatcherServlet&#10;✅ **Test 5** - Détection automatique des routes avec paramètres&#10;&#10;## Exemple de Route Détectée&#10;&#10;```&#10;Routes chargées: 4&#10;  - /user/{userId}/profile/{profileId} → UserController.getUserProfile  &#10;  - /user/{id} → UserController.getUserById&#10;  - /user/{id}/age → UserController.getUserAge&#10;  - /user/{id}/data → UserController.getUserData&#10;```&#10;&#10;## Comment Tester&#10;&#10;1. Accédez à une URL comme `/user/123`&#10;2. Le framework :&#10;   - Trouve automatiquement le pattern `/user/{id}`&#10;   - Extrait le paramètre `id = &quot;123&quot;`&#10;   - L'inject dans la méthode du contrôleur&#10;   - Exécute la méthode avec la bonne valeur&#10;&#10;**Résultat** : Les paramètres d'URL sont maintenant aussi simples à utiliser que les paramètres de requête classiques !" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/example/UserController.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/example/UserController.java" />
              <option name="updatedContent" value="package webframe.example;&#10;&#10;import webframe.core.annotation.Controller;&#10;import webframe.core.annotation.RequestParam;&#10;import webframe.core.annotation.Router;&#10;import webframe.core.tools.ModelView;&#10;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Contrôleur d'exemple démontrant l'utilisation des paramètres d'URL.&#10; */&#10;@Controller&#10;public class UserController {&#10;&#10;    /**&#10;     * Route avec paramètre d'URL {id}.&#10;     * Le paramètre 'id' sera automatiquement extrait de l'URL et passé à la méthode.&#10;     */&#10;    @Router(value = &quot;/user/{id}&quot;, view = &quot;user-details&quot;)&#10;    public ModelView getUserById(@RequestParam(&quot;id&quot;) String userId) {&#10;        ModelView model = new ModelView();&#10;        model.setView(&quot;user-details&quot;);&#10;        &#10;        // Simuler la récupération d'un utilisateur&#10;        Map&lt;String, Object&gt; userData = new HashMap&lt;&gt;();&#10;        userData.put(&quot;userId&quot;, userId);&#10;        userData.put(&quot;userName&quot;, &quot;Utilisateur &quot; + userId);&#10;        userData.put(&quot;email&quot;, &quot;user&quot; + userId + &quot;@example.com&quot;);&#10;        &#10;        model.addData(&quot;user&quot;, userData);&#10;        model.addData(&quot;message&quot;, &quot;Utilisateur trouvé avec l'ID: &quot; + userId);&#10;        &#10;        return model;&#10;    }&#10;    &#10;    /**&#10;     * Route avec multiple paramètres d'URL {userId} et {profileId}.&#10;     */&#10;    @Router(value = &quot;/user/{userId}/profile/{profileId}&quot;, view = &quot;user-profile&quot;)&#10;    public ModelView getUserProfile(&#10;            @RequestParam(&quot;userId&quot;) String userId, &#10;            @RequestParam(&quot;profileId&quot;) String profileId) {&#10;        &#10;        ModelView model = new ModelView();&#10;        model.setView(&quot;user-profile&quot;);&#10;        &#10;        model.addData(&quot;userId&quot;, userId);&#10;        model.addData(&quot;profileId&quot;, profileId);&#10;        model.addData(&quot;message&quot;, &quot;Profil &quot; + profileId + &quot; de l'utilisateur &quot; + userId);&#10;        &#10;        return model;&#10;    }&#10;    &#10;    /**&#10;     * Route mixte avec paramètre d'URL et paramètre de requête classique.&#10;     * L'ID vient de l'URL, le format peut venir d'un paramètre de requête ?format=json&#10;     */&#10;    @Router(value = &quot;/user/{id}/data&quot;, view = &quot;user-data&quot;)&#10;    public ModelView getUserData(&#10;            @RequestParam(&quot;id&quot;) String userId,&#10;            @RequestParam(value = &quot;format&quot;, defaultValue = &quot;html&quot;) String format) {&#10;        &#10;        ModelView model = new ModelView();&#10;        model.setView(&quot;user-data&quot;);&#10;        &#10;        model.addData(&quot;userId&quot;, userId);&#10;        model.addData(&quot;format&quot;, format);&#10;        model.addData(&quot;message&quot;, &quot;Données de l'utilisateur &quot; + userId + &quot; en format &quot; + format);&#10;        &#10;        return model;&#10;    }&#10;    &#10;    /**&#10;     * Route avec paramètre d'URL converti automatiquement en int.&#10;     */&#10;    @Router(value = &quot;/user/{id}/age&quot;, view = &quot;user-age&quot;)&#10;    public ModelView getUserAge(@RequestParam(&quot;id&quot;) int userId) {&#10;        ModelView model = new ModelView();&#10;        model.setView(&quot;user-age&quot;);&#10;        &#10;        model.addData(&quot;userId&quot;, userId);&#10;        model.addData(&quot;age&quot;, userId * 2 + 20); // Calcul fictif&#10;        model.addData(&quot;message&quot;, &quot;Âge calculé pour l'utilisateur ID &quot; + userId);&#10;        &#10;        return model;&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/FormTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/FormTest.java" />
              <option name="originalContent" value="package webframe.test;&#10;&#10;import webframe.core.util.ParameterResolver;&#10;import webframe.core.annotation.RequestParam;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;&#10;import java.lang.reflect.Method;&#10;import java.lang.reflect.Parameter;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test pour vérifier le fonctionnement du système de formulaires et @RequestParam.&#10; */&#10;public class FormTest {&#10;&#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test du Système de Formulaires ===\n&quot;);&#10;&#10;        testParameterResolution();&#10;        testAnnotationParsing();&#10;        testParameterValidation();&#10;    }&#10;&#10;    private static void testParameterResolution() {&#10;        System.out.println(&quot;1. Test de résolution des paramètres:&quot;);&#10;&#10;        try {&#10;            // Simuler une requête HTTP&#10;            MockHttpServletRequest request = new MockHttpServletRequest();&#10;            request.addParameter(&quot;username&quot;, &quot;john_doe&quot;);&#10;            request.addParameter(&quot;email&quot;, &quot;john@example.com&quot;);&#10;            request.addParameter(&quot;age&quot;, &quot;25&quot;);&#10;            request.addParameter(&quot;country&quot;, &quot;France&quot;);&#10;&#10;            // Récupérer la méthode du contrôleur&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            // Résoudre les paramètres&#10;            Object[] args = ParameterResolver.resolveParameters(method, request);&#10;&#10;            System.out.printf(&quot;  Paramètres résolus: %d arguments%n&quot;, args.length);&#10;            System.out.printf(&quot;    username: %s (String)%n&quot;, args[0]);&#10;            System.out.printf(&quot;    email: %s (String)%n&quot;, args[1]);&#10;            System.out.printf(&quot;    age: %s (%s)%n&quot;, args[2], args[2].getClass().getSimpleName());&#10;            System.out.printf(&quot;    country: %s (String)%n&quot;, args[3]);&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    private static void testAnnotationParsing() {&#10;        System.out.println(&quot;2. Test d'analyse des annotations:&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            Parameter[] parameters = method.getParameters();&#10;            for (int i = 0; i &lt; parameters.length; i++) {&#10;                Parameter param = parameters[i];&#10;                RequestParam annotation = param.getAnnotation(RequestParam.class);&#10;&#10;                System.out.printf(&quot;  Paramètre %d: %s%n&quot;, i + 1, param.getName());&#10;                if (annotation != null) {&#10;                    System.out.printf(&quot;    @RequestParam(value='%s', name='%s', required=%s, defaultValue='%s')%n&quot;,&#10;                        annotation.value(), annotation.name(), annotation.required(), annotation.defaultValue());&#10;                } else {&#10;                    System.out.println(&quot;    Pas d'annotation @RequestParam&quot;);&#10;                }&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    private static void testParameterValidation() {&#10;        System.out.println(&quot;3. Test de validation des paramètres:&quot;);&#10;&#10;        try {&#10;            // Test avec paramètre manquant mais valeur par défaut&#10;            MockHttpServletRequest request1 = new MockHttpServletRequest();&#10;            request1.addParameter(&quot;username&quot;, &quot;jane_doe&quot;);&#10;            request1.addParameter(&quot;email&quot;, &quot;jane@example.com&quot;);&#10;            // age et country manquants, mais ont des valeurs par défaut&#10;&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            Object[] args1 = ParameterResolver.resolveParameters(method, request1);&#10;            System.out.printf(&quot;  Test valeurs par défaut: age=%s, country=%s%n&quot;, args1[2], args1[3]);&#10;&#10;            // Test avec paramètre requis manquant&#10;            MockHttpServletRequest request2 = new MockHttpServletRequest();&#10;            request2.addParameter(&quot;email&quot;, &quot;test@example.com&quot;);&#10;            // username manquant et requis&#10;&#10;            try {&#10;                ParameterResolver.resolveParameters(method, request2);&#10;                System.out.println(&quot;  Erreur: devrait lever une exception pour paramètre requis manquant&quot;);&#10;            } catch (IllegalArgumentException e) {&#10;                System.out.printf(&quot;  ✓ Exception attendue pour paramètre requis manquant: %s%n&quot;, e.getMessage());&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;&#10;        System.out.println(&quot; Le système de formulaires fonctionne correctement !&quot;);&#10;        System.out.println(&quot;   - @RequestParam supporte value, name, required, defaultValue&quot;);&#10;        System.out.println(&quot;   - Conversion automatique des types (String, int, double, boolean, etc.)&quot;);&#10;        System.out.println(&quot;   - Validation des paramètres requis&quot;);&#10;        System.out.println(&quot;   - Support des valeurs par défaut&quot;);&#10;    }&#10;&#10;    /**&#10;     * Mock simple de HttpServletRequest pour les tests&#10;     */&#10;    private static class MockHttpServletRequest implements HttpServletRequest {&#10;        private Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();&#10;&#10;        public void addParameter(String name, String value) {&#10;            parameters.put(name, value);&#10;        }&#10;&#10;        @Override&#10;        public String getParameter(String name) {&#10;            return parameters.get(name);&#10;        }&#10;&#10;        // Autres méthodes de HttpServletRequest (stubs pour les tests)&#10;        @Override public String getAuthType() { return null; }&#10;        @Override public javax.servlet.http.Cookie[] getCookies() { return new javax.servlet.http.Cookie[0]; }&#10;        @Override public long getDateHeader(String name) { return 0; }&#10;        @Override public String getHeader(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaders(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaderNames() { return null; }&#10;        @Override public int getIntHeader(String name) { return 0; }&#10;        @Override public String getMethod() { return &quot;GET&quot;; }&#10;        @Override public String getPathInfo() { return null; }&#10;        @Override public String getPathTranslated() { return null; }&#10;        @Override public String getContextPath() { return &quot;&quot;; }&#10;        @Override public String getQueryString() { return null; }&#10;        @Override public String getRemoteUser() { return null; }&#10;        @Override public boolean isUserInRole(String role) { return false; }&#10;        @Override public java.security.Principal getUserPrincipal() { return null; }&#10;        @Override public String getRequestedSessionId() { return null; }&#10;        @Override public String getRequestURI() { return &quot;/&quot;; }&#10;        @Override public StringBuffer getRequestURL() { return new StringBuffer(&quot;http://localhost/&quot;); }&#10;        @Override public String getServletPath() { return &quot;&quot;; }&#10;        @Override public javax.servlet.http.HttpSession getSession(boolean create) { return null; }&#10;        @Override public javax.servlet.http.HttpSession getSession() { return null; }&#10;        @Override public String changeSessionId() { return null; }&#10;        @Override public boolean isRequestedSessionIdValid() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromCookie() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromURL() { return false; }&#10;        @Override public boolean authenticate(javax.servlet.http.HttpServletResponse response) { return false; }&#10;        @Override public void login(String username, String password) {}&#10;        @Override public void logout() {}&#10;        @Override public java.util.Collection&lt;javax.servlet.http.Part&gt; getParts() { return null; }&#10;        @Override public javax.servlet.http.Part getPart(String name) { return null; }&#10;        @Override public &lt;T extends javax.servlet.http.HttpUpgradeHandler&gt; T upgrade(Class&lt;T&gt; httpUpgradeHandlerClass) { return null; }&#10;        @Override public Object getAttribute(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getAttributeNames() { return null; }&#10;        @Override public String getCharacterEncoding() { return &quot;UTF-8&quot;; }&#10;        @Override public void setCharacterEncoding(String env) {}&#10;        @Override public int getContentLength() { return 0; }&#10;        @Override public long getContentLengthLong() { return 0; }&#10;        @Override public String getContentType() { return &quot;application/x-www-form-urlencoded&quot;; }&#10;        @Override public javax.servlet.ServletInputStream getInputStream() { return null; }&#10;        @Override public java.util.Map&lt;String, String[]&gt; getParameterMap() {&#10;            Map&lt;String, String[]&gt; map = new HashMap&lt;&gt;();&#10;            for (Map.Entry&lt;String, String&gt; entry : parameters.entrySet()) {&#10;                map.put(entry.getKey(), new String[]{entry.getValue()});&#10;            }&#10;            return map;&#10;        }&#10;        @Override public java.util.Enumeration&lt;String&gt; getParameterNames() {&#10;            return java.util.Collections.enumeration(parameters.keySet());&#10;        }&#10;        @Override public String[] getParameterValues(String name) {&#10;            String value = parameters.get(name);&#10;            return value != null ? new String[]{value} : null;&#10;        }&#10;        @Override public String getProtocol() { return &quot;HTTP/1.1&quot;; }&#10;        @Override public String getScheme() { return &quot;http&quot;; }&#10;        @Override public String getServerName() { return &quot;localhost&quot;; }&#10;        @Override public int getServerPort() { return 8080; }&#10;        @Override public java.io.BufferedReader getReader() { return null; }&#10;        @Override public String getRemoteAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public String getRemoteHost() { return &quot;localhost&quot;; }&#10;        @Override public void setAttribute(String name, Object o) {}&#10;        @Override public void removeAttribute(String name) {}&#10;        @Override public java.util.Locale getLocale() { return java.util.Locale.getDefault(); }&#10;        @Override public java.util.Enumeration&lt;java.util.Locale&gt; getLocales() { return null; }&#10;        @Override public boolean isSecure() { return false; }&#10;        @Override public javax.servlet.RequestDispatcher getRequestDispatcher(String path) { return null; }&#10;        @Override public int getRemotePort() { return 0; }&#10;        @Override public String getLocalName() { return &quot;localhost&quot;; }&#10;        @Override public String getLocalAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public int getLocalPort() { return 8080; }&#10;        @Override public javax.servlet.ServletContext getServletContext() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync(javax.servlet.ServletRequest servletRequest, javax.servlet.ServletResponse servletResponse) { return null; }&#10;        @Override public boolean isAsyncStarted() { return false; }&#10;        @Override public boolean isAsyncSupported() { return false; }&#10;        @Override public javax.servlet.AsyncContext getAsyncContext() { return null; }&#10;        @Override public javax.servlet.DispatcherType getDispatcherType() { return javax.servlet.DispatcherType.REQUEST; }&#10;        @Override public String getRequestId() { return &quot;test-request-id&quot;; }&#10;        @Override public String getProtocolRequestId() { return &quot;test-protocol-request-id&quot;; }&#10;        @Override public javax.servlet.ServletConnection getServletConnection() { return null; }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;import webframe.core.util.ParameterResolver;&#10;import webframe.core.annotation.RequestParam;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;&#10;import java.lang.reflect.Method;&#10;import java.lang.reflect.Parameter;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test pour vérifier le fonctionnement du système de formulaires et @RequestParam.&#10; */&#10;public class FormTest {&#10;&#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test du Système de Formulaires ===\n&quot;);&#10;&#10;        testParameterResolution();&#10;        testAnnotationParsing();&#10;        testParameterValidation();&#10;    }&#10;&#10;    private static void testParameterResolution() {&#10;        System.out.println(&quot;1. Test de résolution des paramètres:&quot;);&#10;&#10;        try {&#10;            // Simuler une requête HTTP&#10;            MockHttpServletRequest request = new MockHttpServletRequest();&#10;            request.addParameter(&quot;username&quot;, &quot;john_doe&quot;);&#10;            request.addParameter(&quot;email&quot;, &quot;john@example.com&quot;);&#10;            request.addParameter(&quot;age&quot;, &quot;25&quot;);&#10;            request.addParameter(&quot;country&quot;, &quot;France&quot;);&#10;&#10;            // Récupérer la méthode du contrôleur&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            // Résoudre les paramètres&#10;            Object[] args = ParameterResolver.resolveParameters(method, request);&#10;&#10;            System.out.printf(&quot;  Paramètres résolus: %d arguments%n&quot;, args.length);&#10;            System.out.printf(&quot;    username: %s (String)%n&quot;, args[0]);&#10;            System.out.printf(&quot;    email: %s (String)%n&quot;, args[1]);&#10;            System.out.printf(&quot;    age: %s (%s)%n&quot;, args[2], args[2].getClass().getSimpleName());&#10;            System.out.printf(&quot;    country: %s (String)%n&quot;, args[3]);&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    private static void testAnnotationParsing() {&#10;        System.out.println(&quot;2. Test d'analyse des annotations:&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            Parameter[] parameters = method.getParameters();&#10;            for (int i = 0; i &lt; parameters.length; i++) {&#10;                Parameter param = parameters[i];&#10;                RequestParam annotation = param.getAnnotation(RequestParam.class);&#10;&#10;                System.out.printf(&quot;  Paramètre %d: %s%n&quot;, i + 1, param.getName());&#10;                if (annotation != null) {&#10;                    System.out.printf(&quot;    @RequestParam(value='%s', name='%s', required=%s, defaultValue='%s')%n&quot;,&#10;                        annotation.value(), annotation.name(), annotation.required(), annotation.defaultValue());&#10;                } else {&#10;                    System.out.println(&quot;    Pas d'annotation @RequestParam&quot;);&#10;                }&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    private static void testParameterValidation() {&#10;        System.out.println(&quot;3. Test de validation des paramètres:&quot;);&#10;&#10;        try {&#10;            // Test avec paramètre manquant mais valeur par défaut&#10;            MockHttpServletRequest request1 = new MockHttpServletRequest();&#10;            request1.addParameter(&quot;username&quot;, &quot;jane_doe&quot;);&#10;            request1.addParameter(&quot;email&quot;, &quot;jane@example.com&quot;);&#10;            // age et country manquants, mais ont des valeurs par défaut&#10;&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class);&#10;&#10;            Object[] args1 = ParameterResolver.resolveParameters(method, request1);&#10;            System.out.printf(&quot;  Test valeurs par défaut: age=%s, country=%s%n&quot;, args1[2], args1[3]);&#10;&#10;            // Test avec paramètre requis manquant&#10;            MockHttpServletRequest request2 = new MockHttpServletRequest();&#10;            request2.addParameter(&quot;email&quot;, &quot;test@example.com&quot;);&#10;            // username manquant et requis&#10;&#10;            try {&#10;                ParameterResolver.resolveParameters(method, request2);&#10;                System.out.println(&quot;  Erreur: devrait lever une exception pour paramètre requis manquant&quot;);&#10;            } catch (IllegalArgumentException e) {&#10;                System.out.printf(&quot;  ✓ Exception attendue pour paramètre requis manquant: %s%n&quot;, e.getMessage());&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;&#10;        System.out.println(&quot; Le système de formulaires fonctionne correctement !&quot;);&#10;        System.out.println(&quot;   - @RequestParam supporte value, name, required, defaultValue&quot;);&#10;        System.out.println(&quot;   - Conversion automatique des types (String, int, double, boolean, etc.)&quot;);&#10;        System.out.println(&quot;   - Validation des paramètres requis&quot;);&#10;        System.out.println(&quot;   - Support des valeurs par défaut&quot;);&#10;    }&#10;&#10;    /**&#10;     * Mock simple de HttpServletRequest pour les tests&#10;     */&#10;    private static class MockHttpServletRequest implements HttpServletRequest {&#10;        private Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();&#10;&#10;        public void addParameter(String name, String value) {&#10;            parameters.put(name, value);&#10;        }&#10;&#10;        @Override&#10;        public String getParameter(String name) {&#10;            return parameters.get(name);&#10;        }&#10;&#10;        // Autres méthodes de HttpServletRequest (stubs pour les tests)&#10;        @Override public String getAuthType() { return null; }&#10;        @Override public javax.servlet.http.Cookie[] getCookies() { return new javax.servlet.http.Cookie[0]; }&#10;        @Override public long getDateHeader(String name) { return 0; }&#10;        @Override public String getHeader(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaders(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaderNames() { return null; }&#10;        @Override public int getIntHeader(String name) { return 0; }&#10;        @Override public String getMethod() { return &quot;GET&quot;; }&#10;        @Override public String getPathInfo() { return null; }&#10;        @Override public String getPathTranslated() { return null; }&#10;        @Override public String getContextPath() { return &quot;&quot;; }&#10;        @Override public String getQueryString() { return null; }&#10;        @Override public String getRemoteUser() { return null; }&#10;        @Override public boolean isUserInRole(String role) { return false; }&#10;        @Override public java.security.Principal getUserPrincipal() { return null; }&#10;        @Override public String getRequestedSessionId() { return null; }&#10;        @Override public String getRequestURI() { return &quot;/&quot;; }&#10;        @Override public StringBuffer getRequestURL() { return new StringBuffer(&quot;http://localhost/&quot;); }&#10;        @Override public String getServletPath() { return &quot;&quot;; }&#10;        @Override public javax.servlet.http.HttpSession getSession(boolean create) { return null; }&#10;        @Override public javax.servlet.http.HttpSession getSession() { return null; }&#10;        @Override public String changeSessionId() { return null; }&#10;        @Override public boolean isRequestedSessionIdValid() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromCookie() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromURL() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromUrl() { return false; }&#10;        @Override public boolean authenticate(javax.servlet.http.HttpServletResponse response) { return false; }&#10;        @Override public void login(String username, String password) {}&#10;        @Override public void logout() {}&#10;        @Override public java.util.Collection&lt;javax.servlet.http.Part&gt; getParts() { return null; }&#10;        @Override public javax.servlet.http.Part getPart(String name) { return null; }&#10;        @Override public &lt;T extends javax.servlet.http.HttpUpgradeHandler&gt; T upgrade(Class&lt;T&gt; httpUpgradeHandlerClass) { return null; }&#10;        @Override public Object getAttribute(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getAttributeNames() { return null; }&#10;        @Override public String getCharacterEncoding() { return &quot;UTF-8&quot;; }&#10;        @Override public void setCharacterEncoding(String env) {}&#10;        @Override public int getContentLength() { return 0; }&#10;        @Override public long getContentLengthLong() { return 0; }&#10;        @Override public String getContentType() { return &quot;application/x-www-form-urlencoded&quot;; }&#10;        @Override public javax.servlet.ServletInputStream getInputStream() { return null; }&#10;        @Override public java.util.Map&lt;String, String[]&gt; getParameterMap() {&#10;            Map&lt;String, String[]&gt; map = new HashMap&lt;&gt;();&#10;            for (Map.Entry&lt;String, String&gt; entry : parameters.entrySet()) {&#10;                map.put(entry.getKey(), new String[]{entry.getValue()});&#10;            }&#10;            return map;&#10;        }&#10;        @Override public java.util.Enumeration&lt;String&gt; getParameterNames() {&#10;            return java.util.Collections.enumeration(parameters.keySet());&#10;        }&#10;        @Override public String[] getParameterValues(String name) {&#10;            String value = parameters.get(name);&#10;            return value != null ? new String[]{value} : null;&#10;        }&#10;        @Override public String getProtocol() { return &quot;HTTP/1.1&quot;; }&#10;        @Override public String getScheme() { return &quot;http&quot;; }&#10;        @Override public String getServerName() { return &quot;localhost&quot;; }&#10;        @Override public int getServerPort() { return 8080; }&#10;        @Override public java.io.BufferedReader getReader() { return null; }&#10;        @Override public String getRemoteAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public String getRemoteHost() { return &quot;localhost&quot;; }&#10;        @Override public void setAttribute(String name, Object o) {}&#10;        @Override public void removeAttribute(String name) {}&#10;        @Override public java.util.Locale getLocale() { return java.util.Locale.getDefault(); }&#10;        @Override public java.util.Enumeration&lt;java.util.Locale&gt; getLocales() { return null; }&#10;        @Override public boolean isSecure() { return false; }&#10;        @Override public javax.servlet.RequestDispatcher getRequestDispatcher(String path) { return null; }&#10;        @Override public int getRemotePort() { return 0; }&#10;        @Override public String getLocalName() { return &quot;localhost&quot;; }&#10;        @Override public String getLocalAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public int getLocalPort() { return 8080; }&#10;        @Override public javax.servlet.ServletContext getServletContext() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync(javax.servlet.ServletRequest servletRequest, javax.servlet.ServletResponse servletResponse) { return null; }&#10;        @Override public boolean isAsyncStarted() { return false; }&#10;        @Override public boolean isAsyncSupported() { return false; }&#10;        @Override public javax.servlet.AsyncContext getAsyncContext() { return null; }&#10;        @Override public javax.servlet.DispatcherType getDispatcherType() { return javax.servlet.DispatcherType.REQUEST; }&#10;        @Override public String getRequestId() { return &quot;test-request-id&quot;; }&#10;        @Override public String getProtocolRequestId() { return &quot;test-protocol-request-id&quot;; }&#10;        @Override public javax.servlet.ServletConnection getServletConnection() { return null; }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/FormValidationTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/FormValidationTest.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;import webframe.core.util.ParameterResolver;&#10;import webframe.core.annotation.RequestParam;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;&#10;import java.lang.reflect.Method;&#10;import java.lang.reflect.Parameter;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test complet pour démontrer l'utilisation avancée du système de formulaires&#10; * et de la validation avec @RequestParam.&#10; */&#10;public class FormValidationTest {&#10;&#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test Complet du Système de Formulaires avec Validation ===\n&quot;);&#10;&#10;        testFormControllerValidation();&#10;        testParameterMapping();&#10;        testTypeConversion();&#10;        testErrorHandling();&#10;        testComplexFormData();&#10;    }&#10;&#10;    /**&#10;     * Test de validation du contrôleur FormController&#10;     */&#10;    private static void testFormControllerValidation() {&#10;        System.out.println(&quot;1.  Validation du FormController :&quot;);&#10;&#10;        ParameterResolver.ValidationReport report = ParameterResolver.validateController(FormController.class);&#10;        System.out.println(report);&#10;    }&#10;&#10;    /**&#10;     * Test du mapping des noms de paramètres&#10;     */&#10;    private static void testParameterMapping() {&#10;        System.out.println(&quot;2.  Test du Mapping des Paramètres :&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class, boolean.class, String.class);&#10;&#10;            // Cas 1: Paramètres avec noms correspondants&#10;            MockHttpServletRequest request1 = new MockHttpServletRequest();&#10;            request1.addParameter(&quot;username&quot;, &quot;alice_martin&quot;);&#10;            request1.addParameter(&quot;email&quot;, &quot;alice@exemple.fr&quot;);&#10;            request1.addParameter(&quot;age&quot;, &quot;28&quot;);&#10;            request1.addParameter(&quot;country&quot;, &quot;France&quot;);&#10;            request1.addParameter(&quot;subscribe&quot;, &quot;true&quot;);&#10;            request1.addParameter(&quot;comments&quot;, &quot;Excellent framework !&quot;);&#10;&#10;            Object[] args1 = ParameterResolver.resolveParameters(method, request1);&#10;            System.out.printf(&quot;  ✅ Mapping réussi: username='%s', email='%s', age=%s, country='%s', subscribe=%s%n&quot;,&#10;                args1[0], args1[1], args1[2], args1[3], args1[4]);&#10;&#10;            // Cas 2: Paramètres partiels avec valeurs par défaut&#10;            MockHttpServletRequest request2 = new MockHttpServletRequest();&#10;            request2.addParameter(&quot;username&quot;, &quot;bob_dupont&quot;);&#10;            request2.addParameter(&quot;email&quot;, &quot;bob@test.com&quot;);&#10;            // age, country, subscribe et comments manquants -&gt; valeurs par défaut&#10;&#10;            Object[] args2 = ParameterResolver.resolveParameters(method, request2);&#10;            System.out.printf(&quot;  ✅ Valeurs par défaut: age=%s, country='%s', subscribe=%s, comments='%s'%n&quot;,&#10;                args2[2], args2[3], args2[4], args2[5]);&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  ❌ Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    /**&#10;     * Test de la conversion automatique des types&#10;     */&#10;    private static void testTypeConversion() {&#10;        System.out.println(&quot;3.  Test de Conversion des Types :&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class, boolean.class, String.class);&#10;&#10;            MockHttpServletRequest request = new MockHttpServletRequest();&#10;&#10;            // Test différents formats pour boolean&#10;            request.addParameter(&quot;username&quot;, &quot;test_user&quot;);&#10;            request.addParameter(&quot;email&quot;, &quot;test@example.com&quot;);&#10;            request.addParameter(&quot;age&quot;, &quot;42&quot;);&#10;            request.addParameter(&quot;country&quot;, &quot;Canada&quot;);&#10;            request.addParameter(&quot;subscribe&quot;, &quot;on&quot;); // Format checkbox HTML&#10;            request.addParameter(&quot;comments&quot;, &quot;Tests de conversion&quot;);&#10;&#10;            Object[] args = ParameterResolver.resolveParameters(method, request);&#10;&#10;            System.out.printf(&quot;  ✅ String: '%s' (%s)%n&quot;, args[0], args[0].getClass().getSimpleName());&#10;            System.out.printf(&quot;  ✅ String: '%s' (%s)%n&quot;, args[1], args[1].getClass().getSimpleName());&#10;            System.out.printf(&quot;  ✅ int: %s (%s)%n&quot;, args[2], args[2].getClass().getSimpleName());&#10;            System.out.printf(&quot;  ✅ String: '%s' (%s)%n&quot;, args[3], args[3].getClass().getSimpleName());&#10;            System.out.printf(&quot;  ✅ boolean (from 'on'): %s (%s)%n&quot;, args[4], args[4].getClass().getSimpleName());&#10;            System.out.printf(&quot;  ✅ String: '%s' (%s)%n&quot;, args[5], args[5].getClass().getSimpleName());&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  ❌ Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    /**&#10;     * Test de gestion des erreurs&#10;     */&#10;    private static void testErrorHandling() {&#10;        System.out.println(&quot;4. ⚠️ Test de Gestion des Erreurs :&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class, boolean.class, String.class);&#10;&#10;            // Test 1: Paramètre requis manquant&#10;            MockHttpServletRequest request1 = new MockHttpServletRequest();&#10;            request1.addParameter(&quot;email&quot;, &quot;test@example.com&quot;);&#10;            // username manquant&#10;&#10;            try {&#10;                ParameterResolver.resolveParameters(method, request1);&#10;                System.out.println(&quot;  ❌ Erreur: devrait lever une exception&quot;);&#10;            } catch (IllegalArgumentException e) {&#10;                System.out.printf(&quot;  ✅ Exception attendue pour paramètre manquant: %s%n&quot;, e.getMessage());&#10;            }&#10;&#10;            // Test 2: Conversion de type impossible&#10;            MockHttpServletRequest request2 = new MockHttpServletRequest();&#10;            request2.addParameter(&quot;username&quot;, &quot;test_user&quot;);&#10;            request2.addParameter(&quot;email&quot;, &quot;test@example.com&quot;);&#10;            request2.addParameter(&quot;age&quot;, &quot;pas_un_nombre&quot;); // Erreur de conversion&#10;&#10;            try {&#10;                ParameterResolver.resolveParameters(method, request2);&#10;                System.out.println(&quot;  ❌ Erreur: devrait lever une exception pour conversion impossible&quot;);&#10;            } catch (IllegalArgumentException e) {&#10;                System.out.printf(&quot;  ✅ Exception attendue pour conversion: %s%n&quot;, e.getMessage());&#10;            }&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  ❌ Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;    }&#10;&#10;    /**&#10;     * Test avec des données de formulaire complexes&#10;     */&#10;    private static void testComplexFormData() {&#10;        System.out.println(&quot;5.  Test de Données Complexes :&quot;);&#10;&#10;        try {&#10;            Method method = FormController.class.getMethod(&quot;handleFormSubmit&quot;,&#10;                String.class, String.class, int.class, String.class, boolean.class, String.class);&#10;&#10;            MockHttpServletRequest request = new MockHttpServletRequest();&#10;&#10;            // Simuler des données de formulaire avec caractères spéciaux&#10;            request.addParameter(&quot;username&quot;, &quot;marie-claire_123&quot;);&#10;            request.addParameter(&quot;email&quot;, &quot;marie.claire+test@domaine-exemple.fr&quot;);&#10;            request.addParameter(&quot;age&quot;, &quot;35&quot;);&#10;            request.addParameter(&quot;country&quot;, &quot;Côte d'Ivoire&quot;);&#10;            request.addParameter(&quot;subscribe&quot;, &quot;1&quot;); // Format numérique pour boolean&#10;            request.addParameter(&quot;comments&quot;, &quot;Voici un commentaire avec des accents: éàùç et émojis &quot;);&#10;&#10;            Object[] args = ParameterResolver.resolveParameters(method, request);&#10;&#10;            System.out.printf(&quot;  ✅ Username avec tirets/underscores: '%s'%n&quot;, args[0]);&#10;            System.out.printf(&quot;  ✅ Email complexe: '%s'%n&quot;, args[1]);&#10;            System.out.printf(&quot;  ✅ Âge: %s ans%n&quot;, args[2]);&#10;            System.out.printf(&quot;  ✅ Pays avec accents: '%s'%n&quot;, args[3]);&#10;            System.out.printf(&quot;  ✅ Boolean depuis '1': %s%n&quot;, args[4]);&#10;            System.out.printf(&quot;  ✅ Commentaire avec caractères spéciaux: '%s'%n&quot;, args[5]);&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;  ❌ Erreur: &quot; + e.getMessage());&#10;        }&#10;        System.out.println();&#10;&#10;        System.out.println(&quot; Tests terminés avec succès !&quot;);&#10;        System.out.println(&quot;\n Résumé des fonctionnalités validées :&quot;);&#10;        System.out.println(&quot;   ✅ Mapping automatique des paramètres HTTP vers méthodes Java&quot;);&#10;        System.out.println(&quot;   ✅ Support des annotations @RequestParam avec value, name, required, defaultValue&quot;);&#10;        System.out.println(&quot;   ✅ Conversion automatique des types (String, int, boolean, etc.)&quot;);&#10;        System.out.println(&quot;   ✅ Gestion des valeurs par défaut pour paramètres optionnels&quot;);&#10;        System.out.println(&quot;   ✅ Validation des paramètres requis avec exceptions informatives&quot;);&#10;        System.out.println(&quot;   ✅ Support des formats HTML standards (checkbox 'on', boolean '1', etc.)&quot;);&#10;        System.out.println(&quot;   ✅ Gestion des caractères spéciaux et accents dans les données&quot;);&#10;        System.out.println(&quot;   ✅ Système de validation du contrôleur pour détecter les problèmes de configuration&quot;);&#10;    }&#10;&#10;    /**&#10;     * Mock simple de HttpServletRequest pour les tests&#10;     */&#10;    private static class MockHttpServletRequest implements HttpServletRequest {&#10;        private Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();&#10;&#10;        public void addParameter(String name, String value) {&#10;            parameters.put(name, value);&#10;        }&#10;&#10;        @Override&#10;        public String getParameter(String name) {&#10;            return parameters.get(name);&#10;        }&#10;&#10;        // Implémentation minimale des autres méthodes requises&#10;        @Override public String getAuthType() { return null; }&#10;        @Override public javax.servlet.http.Cookie[] getCookies() { return new javax.servlet.http.Cookie[0]; }&#10;        @Override public long getDateHeader(String name) { return 0; }&#10;        @Override public String getHeader(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaders(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaderNames() { return null; }&#10;        @Override public int getIntHeader(String name) { return 0; }&#10;        @Override public String getMethod() { return &quot;POST&quot;; }&#10;        @Override public String getPathInfo() { return null; }&#10;        @Override public String getPathTranslated() { return null; }&#10;        @Override public String getContextPath() { return &quot;&quot;; }&#10;        @Override public String getQueryString() { return null; }&#10;        @Override public String getRemoteUser() { return null; }&#10;        @Override public boolean isUserInRole(String role) { return false; }&#10;        @Override public java.security.Principal getUserPrincipal() { return null; }&#10;        @Override public String getRequestedSessionId() { return null; }&#10;        @Override public String getRequestURI() { return &quot;/form/submit&quot;; }&#10;        @Override public StringBuffer getRequestURL() { return new StringBuffer(&quot;http://localhost/form/submit&quot;); }&#10;        @Override public String getServletPath() { return &quot;&quot;; }&#10;        @Override public javax.servlet.http.HttpSession getSession(boolean create) { return null; }&#10;        @Override public javax.servlet.http.HttpSession getSession() { return null; }&#10;        @Override public String changeSessionId() { return null; }&#10;        @Override public boolean isRequestedSessionIdValid() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromCookie() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromURL() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromUrl() { return false; }&#10;        @Override public boolean authenticate(javax.servlet.http.HttpServletResponse response) { return false; }&#10;        @Override public void login(String username, String password) {}&#10;        @Override public void logout() {}&#10;        @Override public java.util.Collection&lt;javax.servlet.http.Part&gt; getParts() { return null; }&#10;        @Override public javax.servlet.http.Part getPart(String name) { return null; }&#10;        @Override public &lt;T extends javax.servlet.http.HttpUpgradeHandler&gt; T upgrade(Class&lt;T&gt; httpUpgradeHandlerClass) { return null; }&#10;        @Override public Object getAttribute(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getAttributeNames() { return null; }&#10;        @Override public String getCharacterEncoding() { return &quot;UTF-8&quot;; }&#10;        @Override public void setCharacterEncoding(String env) {}&#10;        @Override public int getContentLength() { return 0; }&#10;        @Override public long getContentLengthLong() { return 0; }&#10;        @Override public String getContentType() { return &quot;application/x-www-form-urlencoded&quot;; }&#10;        @Override public javax.servlet.ServletInputStream getInputStream() { return null; }&#10;        @Override public java.util.Map&lt;String, String[]&gt; getParameterMap() {&#10;            Map&lt;String, String[]&gt; map = new HashMap&lt;&gt;();&#10;            for (Map.Entry&lt;String, String&gt; entry : parameters.entrySet()) {&#10;                map.put(entry.getKey(), new String[]{entry.getValue()});&#10;            }&#10;            return map;&#10;        }&#10;        @Override public java.util.Enumeration&lt;String&gt; getParameterNames() {&#10;            return java.util.Collections.enumeration(parameters.keySet());&#10;        }&#10;        @Override public String[] getParameterValues(String name) {&#10;            String value = parameters.get(name);&#10;            return value != null ? new String[]{value} : null;&#10;        }&#10;        @Override public String getProtocol() { return &quot;HTTP/1.1&quot;; }&#10;        @Override public String getScheme() { return &quot;http&quot;; }&#10;        @Override public String getServerName() { return &quot;localhost&quot;; }&#10;        @Override public int getServerPort() { return 8080; }&#10;        @Override public java.io.BufferedReader getReader() { return null; }&#10;        @Override public String getRemoteAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public String getRemoteHost() { return &quot;localhost&quot;; }&#10;        @Override public void setAttribute(String name, Object o) {}&#10;        @Override public void removeAttribute(String name) {}&#10;        @Override public java.util.Locale getLocale() { return java.util.Locale.getDefault(); }&#10;        @Override public java.util.Enumeration&lt;java.util.Locale&gt; getLocales() { return null; }&#10;        @Override public boolean isSecure() { return false; }&#10;        @Override public javax.servlet.RequestDispatcher getRequestDispatcher(String path) { return null; }&#10;        @Override public int getRemotePort() { return 0; }&#10;        @Override public String getLocalName() { return &quot;localhost&quot;; }&#10;        @Override public String getLocalAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public int getLocalPort() { return 8080; }&#10;        @Override public javax.servlet.ServletContext getServletContext() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync() { return null; }&#10;        @Override public javax.servlet.AsyncContext startAsync(javax.servlet.ServletRequest servletRequest, javax.servlet.ServletResponse servletResponse) { return null; }&#10;        @Override public boolean isAsyncStarted() { return false; }&#10;        @Override public boolean isAsyncSupported() { return false; }&#10;        @Override public javax.servlet.AsyncContext getAsyncContext() { return null; }&#10;        @Override public javax.servlet.DispatcherType getDispatcherType() { return javax.servlet.DispatcherType.REQUEST; }&#10;        @Override public String getRequestId() { return &quot;validation-test-request&quot;; }&#10;        @Override public String getProtocolRequestId() { return &quot;validation-test-protocol&quot;; }&#10;        @Override public javax.servlet.ServletConnection getServletConnection() { return null; }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/FullCycleTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/FullCycleTest.java" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;import webframe.core.ApplicationContext;&#10;import webframe.core.tools.ModelView;&#10;import webframe.core.util.ParameterResolver;&#10;import webframe.core.util.UrlPatternMatcher;&#10;&#10;import java.lang.reflect.Method;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test complet du cycle de traitement d'une requête avec paramètres d'URL.&#10; */&#10;public class FullCycleTest {&#10;    &#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test Complet du Cycle de Traitement ===&quot;);&#10;        &#10;        try {&#10;            testFullRequestCycle();&#10;            testMultipleParameters();&#10;            testTypeConversion();&#10;            &#10;            System.out.println(&quot;✅ Test complet réussi !&quot;);&#10;            &#10;        } catch (Exception e) {&#10;            System.err.println(&quot;❌ Erreur durant le test: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;    &#10;    private static void testFullRequestCycle() throws Exception {&#10;        System.out.println(&quot;\n--- Test 1: Cycle Complet /user/456 ---&quot;);&#10;        &#10;        String requestUrl = &quot;/user/456&quot;;&#10;        &#10;        // 1. Trouver la route correspondante&#10;        ApplicationContext context = ApplicationContext.getInstance();&#10;        ModelView matchedRoute = context.findRoute(requestUrl);&#10;        &#10;        assert matchedRoute != null : &quot;Une route devrait être trouvée&quot;;&#10;        System.out.println(&quot;✓ Route trouvée: &quot; + matchedRoute.getMethod().getName());&#10;        &#10;        // 2. Extraire les paramètres d'URL depuis les données du ModelView&#10;        Map&lt;String, String&gt; urlParameters = extractUrlParametersFromRoute(matchedRoute);&#10;        System.out.println(&quot;✓ Paramètres d'URL extraits: &quot; + urlParameters);&#10;        &#10;        // 3. Créer une requête HTTP mock (vide dans ce cas)&#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;        &#10;        // 4. Résoudre les paramètres de la méthode&#10;        Method method = matchedRoute.getMethod();&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParameters);&#10;        &#10;        System.out.println(&quot;✓ Arguments résolus: &quot; + java.util.Arrays.toString(args));&#10;        assert args.length &gt; 0 : &quot;Au moins un argument devrait être résolu&quot;;&#10;        assert &quot;456&quot;.equals(args[0]) : &quot;Le premier argument devrait être '456'&quot;;&#10;        &#10;        // 5. Exécuter la méthode du contrôleur&#10;        Object controllerInstance = matchedRoute.getController().getDeclaredConstructor().newInstance();&#10;        method.setAccessible(true);&#10;        Object result = method.invoke(controllerInstance, args);&#10;        &#10;        System.out.println(&quot;✓ Méthode exécutée, résultat: &quot; + result.getClass().getSimpleName());&#10;        &#10;        if (result instanceof ModelView) {&#10;            ModelView resultModel = (ModelView) result;&#10;            System.out.println(&quot;  - Vue: &quot; + resultModel.getView());&#10;            System.out.println(&quot;  - Données: &quot; + resultModel.getData());&#10;        }&#10;    }&#10;    &#10;    private static void testMultipleParameters() throws Exception {&#10;        System.out.println(&quot;\n--- Test 2: Multiples Paramètres /user/789/profile/abc ---&quot;);&#10;        &#10;        String requestUrl = &quot;/user/789/profile/abc&quot;;&#10;        &#10;        ApplicationContext context = ApplicationContext.getInstance();&#10;        ModelView matchedRoute = context.findRoute(requestUrl);&#10;        &#10;        assert matchedRoute != null : &quot;Une route devrait être trouvée&quot;;&#10;        System.out.println(&quot;✓ Route trouvée: &quot; + matchedRoute.getMethod().getName());&#10;        &#10;        Map&lt;String, String&gt; urlParameters = extractUrlParametersFromRoute(matchedRoute);&#10;        System.out.println(&quot;✓ Paramètres d'URL extraits: &quot; + urlParameters);&#10;        &#10;        assert urlParameters.containsKey(&quot;userId&quot;) : &quot;Le paramètre userId devrait être présent&quot;;&#10;        assert urlParameters.containsKey(&quot;profileId&quot;) : &quot;Le paramètre profileId devrait être présent&quot;;&#10;        assert &quot;789&quot;.equals(urlParameters.get(&quot;userId&quot;)) : &quot;userId devrait être '789'&quot;;&#10;        assert &quot;abc&quot;.equals(urlParameters.get(&quot;profileId&quot;)) : &quot;profileId devrait être 'abc'&quot;;&#10;        &#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;        Method method = matchedRoute.getMethod();&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParameters);&#10;        &#10;        System.out.println(&quot;✓ Arguments résolus: &quot; + java.util.Arrays.toString(args));&#10;        assert args.length == 2 : &quot;Deux arguments devraient être résolus&quot;;&#10;        assert &quot;789&quot;.equals(args[0]) : &quot;Premier argument devrait être '789'&quot;;&#10;        assert &quot;abc&quot;.equals(args[1]) : &quot;Deuxième argument devrait être 'abc'&quot;;&#10;    }&#10;    &#10;    private static void testTypeConversion() throws Exception {&#10;        System.out.println(&quot;\n--- Test 3: Conversion de Type /user/999/age ---&quot;);&#10;        &#10;        String requestUrl = &quot;/user/999/age&quot;;&#10;        &#10;        ApplicationContext context = ApplicationContext.getInstance();&#10;        ModelView matchedRoute = context.findRoute(requestUrl);&#10;        &#10;        assert matchedRoute != null : &quot;Une route devrait être trouvée&quot;;&#10;        System.out.println(&quot;✓ Route trouvée: &quot; + matchedRoute.getMethod().getName());&#10;        &#10;        Map&lt;String, String&gt; urlParameters = extractUrlParametersFromRoute(matchedRoute);&#10;        System.out.println(&quot;✓ Paramètres d'URL extraits: &quot; + urlParameters);&#10;        &#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;        Method method = matchedRoute.getMethod();&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParameters);&#10;        &#10;        System.out.println(&quot;✓ Arguments résolus: &quot; + java.util.Arrays.toString(args));&#10;        assert args.length == 1 : &quot;Un argument devrait être résolu&quot;;&#10;        assert args[0] instanceof Integer : &quot;L'argument devrait être un Integer&quot;;&#10;        assert ((Integer) args[0]).intValue() == 999 : &quot;L'argument devrait être 999&quot;;&#10;        &#10;        System.out.println(&quot;✓ Conversion String → int réussie&quot;);&#10;    }&#10;    &#10;    /**&#10;     * Extrait les paramètres d'URL depuis les données du ModelView.&#10;     * Copie de la méthode du DispatcherServlet pour les tests.&#10;     */&#10;    private static Map&lt;String, String&gt; extractUrlParametersFromRoute(ModelView route) {&#10;        Map&lt;String, String&gt; urlParameters = new HashMap&lt;&gt;();&#10;        &#10;        if (route.getData() != null) {&#10;            for (Map.Entry&lt;String, Object&gt; entry : route.getData().entrySet()) {&#10;                String key = entry.getKey();&#10;                if (key.startsWith(&quot;urlParam_&quot;)) {&#10;                    String paramName = key.substring(&quot;urlParam_&quot;.length());&#10;                    Object value = entry.getValue();&#10;                    if (value != null) {&#10;                        urlParameters.put(paramName, value.toString());&#10;                    }&#10;                }&#10;            }&#10;        }&#10;        &#10;        return urlParameters;&#10;    }&#10;    &#10;    /**&#10;     * Mock minimal de HttpServletRequest pour les tests&#10;     */&#10;    private static class MockHttpServletRequest implements jakarta.servlet.http.HttpServletRequest {&#10;        private final Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();&#10;        &#10;        public void addParameter(String name, String value) {&#10;            parameters.put(name, value);&#10;        }&#10;        &#10;        @Override&#10;        public String getParameter(String name) {&#10;            return parameters.get(name);&#10;        }&#10;        &#10;        // Implémentations minimales des autres méthodes...&#10;        @Override public String getAuthType() { return null; }&#10;        @Override public jakarta.servlet.http.Cookie[] getCookies() { return null; }&#10;        @Override public long getDateHeader(String name) { return 0; }&#10;        @Override public String getHeader(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaders(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaderNames() { return null; }&#10;        @Override public int getIntHeader(String name) { return 0; }&#10;        @Override public String getMethod() { return &quot;GET&quot;; }&#10;        @Override public String getPathInfo() { return null; }&#10;        @Override public String getPathTranslated() { return null; }&#10;        @Override public String getContextPath() { return &quot;&quot;; }&#10;        @Override public String getQueryString() { return null; }&#10;        @Override public String getRemoteUser() { return null; }&#10;        @Override public boolean isUserInRole(String role) { return false; }&#10;        @Override public java.security.Principal getUserPrincipal() { return null; }&#10;        @Override public String getRequestedSessionId() { return null; }&#10;        @Override public String getRequestURI() { return &quot;/&quot;; }&#10;        @Override public StringBuffer getRequestURL() { return new StringBuffer(&quot;http://localhost/&quot;); }&#10;        @Override public String getServletPath() { return &quot;&quot;; }&#10;        @Override public jakarta.servlet.http.HttpSession getSession(boolean create) { return null; }&#10;        @Override public jakarta.servlet.http.HttpSession getSession() { return null; }&#10;        @Override public String changeSessionId() { return null; }&#10;        @Override public boolean isRequestedSessionIdValid() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromCookie() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromURL() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromUrl() { return false; }&#10;        @Override public boolean authenticate(jakarta.servlet.http.HttpServletResponse response) { return false; }&#10;        @Override public void login(String username, String password) {}&#10;        @Override public void logout() {}&#10;        @Override public java.util.Collection&lt;jakarta.servlet.http.Part&gt; getParts() { return null; }&#10;        @Override public jakarta.servlet.http.Part getPart(String name) { return null; }&#10;        @Override public &lt;T extends jakarta.servlet.http.HttpUpgradeHandler&gt; T upgrade(Class&lt;T&gt; httpUpgradeHandlerClass) { return null; }&#10;        @Override public Object getAttribute(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getAttributeNames() { return null; }&#10;        @Override public String getCharacterEncoding() { return &quot;UTF-8&quot;; }&#10;        @Override public void setCharacterEncoding(String env) {}&#10;        @Override public int getContentLength() { return 0; }&#10;        @Override public long getContentLengthLong() { return 0; }&#10;        @Override public String getContentType() { return null; }&#10;        @Override public jakarta.servlet.ServletInputStream getInputStream() { return null; }&#10;        @Override public String[] getParameterValues(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getParameterNames() { return null; }&#10;        @Override public java.util.Map&lt;String, String[]&gt; getParameterMap() { return null; }&#10;        @Override public String getProtocol() { return &quot;HTTP/1.1&quot;; }&#10;        @Override public String getScheme() { return &quot;http&quot;; }&#10;        @Override public String getServerName() { return &quot;localhost&quot;; }&#10;        @Override public int getServerPort() { return 80; }&#10;        @Override public java.io.BufferedReader getReader() { return null; }&#10;        @Override public String getRemoteAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public String getRemoteHost() { return &quot;localhost&quot;; }&#10;        @Override public void setAttribute(String name, Object o) {}&#10;        @Override public void removeAttribute(String name) {}&#10;        @Override public java.util.Locale getLocale() { return null; }&#10;        @Override public java.util.Enumeration&lt;java.util.Locale&gt; getLocales() { return null; }&#10;        @Override public boolean isSecure() { return false; }&#10;        @Override public jakarta.servlet.RequestDispatcher getRequestDispatcher(String path) { return null; }&#10;        @Override public String getRealPath(String path) { return null; }&#10;        @Override public int getRemotePort() { return 0; }&#10;        @Override public String getLocalName() { return &quot;localhost&quot;; }&#10;        @Override public String getLocalAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public int getLocalPort() { return 80; }&#10;        @Override public jakarta.servlet.ServletContext getServletContext() { return null; }&#10;        @Override public jakarta.servlet.AsyncContext startAsync() { return null; }&#10;        @Override public jakarta.servlet.AsyncContext startAsync(jakarta.servlet.ServletRequest servletRequest, jakarta.servlet.ServletResponse servletResponse) { return null; }&#10;        @Override public boolean isAsyncStarted() { return false; }&#10;        @Override public boolean isAsyncSupported() { return false; }&#10;        @Override public jakarta.servlet.AsyncContext getAsyncContext() { return null; }&#10;        @Override public jakarta.servlet.DispatcherType getDispatcherType() { return jakarta.servlet.DispatcherType.REQUEST; }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/IntegrationTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/IntegrationTest.java" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;import webframe.core.ApplicationContext;&#10;import webframe.core.tools.ModelView;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test d'intégration pour vérifier que les routes avec paramètres d'URL&#10; * sont correctement détectées et que les paramètres sont extraits.&#10; */&#10;public class IntegrationTest {&#10;    &#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test d'Intégration des Paramètres d'URL ===&quot;);&#10;        &#10;        try {&#10;            testApplicationContext();&#10;            testRouteMatching();&#10;            &#10;            System.out.println(&quot;✅ Test d'intégration réussi !&quot;);&#10;            &#10;        } catch (Exception e) {&#10;            System.err.println(&quot;❌ Erreur durant le test d'intégration: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;    &#10;    private static void testApplicationContext() throws Exception {&#10;        System.out.println(&quot;\n--- Test 1: Chargement des Routes ---&quot;);&#10;        &#10;        ApplicationContext context = ApplicationContext.getInstance();&#10;        Map&lt;String, ModelView&gt; routes = context.getAllRoutes();&#10;        &#10;        System.out.println(&quot;Routes chargées: &quot; + routes.size());&#10;        for (String url : routes.keySet()) {&#10;            ModelView route = routes.get(url);&#10;            System.out.println(&quot;  - &quot; + url + &quot; → &quot; + route.getController().getSimpleName() + &quot;.&quot; + route.getMethod().getName());&#10;        }&#10;        &#10;        // Vérifier qu'au moins quelques routes avec paramètres sont détectées&#10;        boolean hasParameterRoute = false;&#10;        for (String url : routes.keySet()) {&#10;            if (url.contains(&quot;{&quot;) &amp;&amp; url.contains(&quot;}&quot;)) {&#10;                hasParameterRoute = true;&#10;                System.out.println(&quot;✓ Route avec paramètres trouvée: &quot; + url);&#10;                break;&#10;            }&#10;        }&#10;        &#10;        assert hasParameterRoute : &quot;Au moins une route avec paramètres devrait être trouvée&quot;;&#10;    }&#10;    &#10;    private static void testRouteMatching() throws Exception {&#10;        System.out.println(&quot;\n--- Test 2: Correspondance de Routes ---&quot;);&#10;        &#10;        ApplicationContext context = ApplicationContext.getInstance();&#10;        &#10;        // Test avec une URL concrète qui devrait matcher un pattern&#10;        String testUrl = &quot;/user/123&quot;;&#10;        ModelView matchedRoute = context.findRoute(testUrl);&#10;        &#10;        if (matchedRoute != null) {&#10;            System.out.println(&quot;Route trouvée pour &quot; + testUrl + &quot;:&quot;);&#10;            System.out.println(&quot;  - URL du pattern: &quot; + matchedRoute.getUrl());&#10;            System.out.println(&quot;  - Contrôleur: &quot; + matchedRoute.getController().getSimpleName());&#10;            System.out.println(&quot;  - Méthode: &quot; + matchedRoute.getMethod().getName());&#10;            System.out.println(&quot;  - Vue: &quot; + matchedRoute.getView());&#10;            &#10;            // Vérifier que les paramètres d'URL ont été extraits&#10;            Map&lt;String, Object&gt; data = matchedRoute.getData();&#10;            System.out.println(&quot;  - Données: &quot; + data);&#10;            &#10;            // Chercher les paramètres d'URL (préfixés par &quot;urlParam_&quot;)&#10;            boolean hasUrlParam = false;&#10;            for (String key : data.keySet()) {&#10;                if (key.startsWith(&quot;urlParam_&quot;)) {&#10;                    hasUrlParam = true;&#10;                    String paramName = key.substring(&quot;urlParam_&quot;.length());&#10;                    Object paramValue = data.get(key);&#10;                    System.out.println(&quot;    ✓ Paramètre d'URL: &quot; + paramName + &quot; = &quot; + paramValue);&#10;                }&#10;            }&#10;            &#10;            assert hasUrlParam : &quot;Au moins un paramètre d'URL devrait être extrait&quot;;&#10;            System.out.println(&quot;✓ Correspondance de route avec extraction de paramètres OK&quot;);&#10;            &#10;        } else {&#10;            System.out.println(&quot;⚠️  Aucune route trouvée pour &quot; + testUrl);&#10;            System.out.println(&quot;Routes disponibles:&quot;);&#10;            for (String url : context.getAllRoutes().keySet()) {&#10;                System.out.println(&quot;  - &quot; + url);&#10;            }&#10;        }&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/SimpleParameterTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/SimpleParameterTest.java" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;/**&#10; * Test simple sans dépendances externes pour vérifier les paramètres d'URL.&#10; */&#10;public class SimpleParameterTest {&#10;    &#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test Simple des Paramètres d'URL ===&quot;);&#10;        &#10;        testUrlPatternMatcher();&#10;        testParameterExtraction();&#10;        &#10;        System.out.println(&quot;✅ Tests terminés avec succès !&quot;);&#10;    }&#10;    &#10;    private static void testUrlPatternMatcher() {&#10;        System.out.println(&quot;\n--- Test 1: UrlPatternMatcher ---&quot;);&#10;        &#10;        // Test de correspondance de pattern&#10;        String url = &quot;/user/123&quot;;&#10;        String pattern = &quot;/user/{id}&quot;;&#10;        &#10;        boolean matches = webframe.core.util.UrlPatternMatcher.matchesPattern(url, pattern);&#10;        System.out.println(&quot;Pattern '&quot; + pattern + &quot;' correspond à '&quot; + url + &quot;': &quot; + matches);&#10;        &#10;        // Test d'extraction de paramètres&#10;        java.util.Map&lt;String, String&gt; params = webframe.core.util.UrlPatternMatcher.extractParameters(url, pattern);&#10;        System.out.println(&quot;Paramètres extraits: &quot; + params);&#10;        &#10;        assert matches : &quot;Le pattern devrait correspondre&quot;;&#10;        assert params.containsKey(&quot;id&quot;) : &quot;Le paramètre 'id' devrait être extrait&quot;;&#10;        assert &quot;123&quot;.equals(params.get(&quot;id&quot;)) : &quot;La valeur du paramètre 'id' devrait être '123'&quot;;&#10;        &#10;        System.out.println(&quot;✓ Extraction de paramètres OK&quot;);&#10;    }&#10;    &#10;    private static void testParameterExtraction() {&#10;        System.out.println(&quot;\n--- Test 2: Extraction Multiple ---&quot;);&#10;        &#10;        String url = &quot;/user/456/profile/789&quot;;&#10;        String pattern = &quot;/user/{userId}/profile/{profileId}&quot;;&#10;        &#10;        java.util.Map&lt;String, String&gt; params = webframe.core.util.UrlPatternMatcher.extractParameters(url, pattern);&#10;        System.out.println(&quot;URL: &quot; + url);&#10;        System.out.println(&quot;Pattern: &quot; + pattern);&#10;        System.out.println(&quot;Paramètres extraits: &quot; + params);&#10;        &#10;        assert params.containsKey(&quot;userId&quot;) : &quot;Le paramètre 'userId' devrait être extrait&quot;;&#10;        assert params.containsKey(&quot;profileId&quot;) : &quot;Le paramètre 'profileId' devrait être extrait&quot;;&#10;        assert &quot;456&quot;.equals(params.get(&quot;userId&quot;)) : &quot;La valeur de 'userId' devrait être '456'&quot;;&#10;        assert &quot;789&quot;.equals(params.get(&quot;profileId&quot;)) : &quot;La valeur de 'profileId' devrait être '789'&quot;;&#10;        &#10;        System.out.println(&quot;✓ Extraction multiple OK&quot;);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/src/main/java/webframe/test/UrlParameterTest.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/src/main/java/webframe/test/UrlParameterTest.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package webframe.test;&#10;&#10;import webframe.core.util.ParameterResolver;&#10;import webframe.core.annotation.RequestParam;&#10;import jakarta.servlet.http.HttpServletRequest;&#10;&#10;import java.lang.reflect.Method;&#10;import java.util.HashMap;&#10;import java.util.Map;&#10;&#10;/**&#10; * Test simple pour vérifier que les paramètres d'URL sont correctement traités.&#10; */&#10;public class UrlParameterTest {&#10;&#10;    public static void main(String[] args) {&#10;        System.out.println(&quot;=== Test des paramètres d'URL ===&quot;);&#10;&#10;        try {&#10;            testUrlParameterResolution();&#10;            testMixedParameters();&#10;            testParameterTypeConversion();&#10;&#10;            System.out.println(&quot;✅ Tous les tests passent !&quot;);&#10;&#10;        } catch (Exception e) {&#10;            System.err.println(&quot;❌ Erreur durant les tests: &quot; + e.getMessage());&#10;            e.printStackTrace();&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Test de base: paramètre d'URL seul&#10;     */&#10;    private static void testUrlParameterResolution() throws Exception {&#10;        System.out.println(&quot;\n--- Test 1: Paramètre d'URL basique ---&quot;);&#10;&#10;        // Simuler une requête HTTP vide&#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;&#10;        // Paramètres d'URL extraits&#10;        Map&lt;String, String&gt; urlParams = new HashMap&lt;&gt;();&#10;        urlParams.put(&quot;id&quot;, &quot;123&quot;);&#10;&#10;        // Méthode de test&#10;        Method method = TestController.class.getMethod(&quot;testMethod&quot;, String.class);&#10;&#10;        // Résolution des paramètres&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParams);&#10;&#10;        // Vérifications&#10;        assert args.length == 1 : &quot;Devrait avoir 1 argument&quot;;&#10;        assert &quot;123&quot;.equals(args[0]) : &quot;L'argument devrait être '123', mais est: &quot; + args[0];&#10;&#10;        System.out.println(&quot;✓ Paramètre d'URL correctement résolu: &quot; + args[0]);&#10;    }&#10;&#10;    /**&#10;     * Test mixte: paramètre d'URL + paramètre de requête&#10;     */&#10;    private static void testMixedParameters() throws Exception {&#10;        System.out.println(&quot;\n--- Test 2: Paramètres mixtes ---&quot;);&#10;&#10;        // Simuler une requête HTTP avec un paramètre&#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;        request.addParameter(&quot;format&quot;, &quot;json&quot;);&#10;&#10;        // Paramètres d'URL extraits&#10;        Map&lt;String, String&gt; urlParams = new HashMap&lt;&gt;();&#10;        urlParams.put(&quot;id&quot;, &quot;456&quot;);&#10;&#10;        // Méthode de test&#10;        Method method = TestController.class.getMethod(&quot;testMixedMethod&quot;, String.class, String.class);&#10;&#10;        // Résolution des paramètres&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParams);&#10;&#10;        // Vérifications&#10;        assert args.length == 2 : &quot;Devrait avoir 2 arguments&quot;;&#10;        assert &quot;456&quot;.equals(args[0]) : &quot;Premier argument devrait être '456', mais est: &quot; + args[0];&#10;        assert &quot;json&quot;.equals(args[1]) : &quot;Deuxième argument devrait être 'json', mais est: &quot; + args[1];&#10;&#10;        System.out.println(&quot;✓ Paramètres mixtes correctement résolus: id=&quot; + args[0] + &quot;, format=&quot; + args[1]);&#10;    }&#10;&#10;    /**&#10;     * Test conversion de type: String -&gt; int&#10;     */&#10;    private static void testParameterTypeConversion() throws Exception {&#10;        System.out.println(&quot;\n--- Test 3: Conversion de type ---&quot;);&#10;&#10;        // Simuler une requête HTTP vide&#10;        MockHttpServletRequest request = new MockHttpServletRequest();&#10;&#10;        // Paramètres d'URL extraits&#10;        Map&lt;String, String&gt; urlParams = new HashMap&lt;&gt;();&#10;        urlParams.put(&quot;id&quot;, &quot;789&quot;);&#10;&#10;        // Méthode de test&#10;        Method method = TestController.class.getMethod(&quot;testIntMethod&quot;, int.class);&#10;&#10;        // Résolution des paramètres&#10;        Object[] args = ParameterResolver.resolveParameters(method, request, urlParams);&#10;&#10;        // Vérifications&#10;        assert args.length == 1 : &quot;Devrait avoir 1 argument&quot;;&#10;        assert args[0] instanceof Integer : &quot;L'argument devrait être un Integer, mais est: &quot; + args[0].getClass();&#10;        assert ((Integer) args[0]).intValue() == 789 : &quot;L'argument devrait être 789, mais est: &quot; + args[0];&#10;&#10;        System.out.println(&quot;✓ Conversion de type correctement effectuée: &quot; + args[0] + &quot; (type: &quot; + args[0].getClass().getSimpleName() + &quot;)&quot;);&#10;    }&#10;&#10;    /**&#10;     * Contrôleur de test avec différentes signatures de méthodes&#10;     */&#10;    public static class TestController {&#10;&#10;        public void testMethod(@RequestParam(&quot;id&quot;) String id) {&#10;        }&#10;&#10;        public void testMixedMethod(&#10;                @RequestParam(&quot;id&quot;) String id,&#10;                @RequestParam(&quot;format&quot;) String format) {&#10;        }&#10;&#10;        public void testIntMethod(@RequestParam(&quot;id&quot;) int id) {&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Mock simple de HttpServletRequest pour les tests&#10;     */&#10;    private static class MockHttpServletRequest implements HttpServletRequest {&#10;        private final Map&lt;String, String&gt; parameters = new HashMap&lt;&gt;();&#10;&#10;        public void addParameter(String name, String value) {&#10;            parameters.put(name, value);&#10;        }&#10;&#10;        @Override&#10;        public String getParameter(String name) {&#10;            return parameters.get(name);&#10;        }&#10;&#10;        // Implémentations minimales pour les autres méthodes (non utilisées dans nos tests)&#10;        @Override public String getAuthType() { return null; }&#10;        @Override public jakarta.servlet.http.Cookie[] getCookies() { return null; }&#10;        @Override public long getDateHeader(String name) { return 0; }&#10;        @Override public String getHeader(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaders(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getHeaderNames() { return null; }&#10;        @Override public int getIntHeader(String name) { return 0; }&#10;        @Override public String getMethod() { return &quot;GET&quot;; }&#10;        @Override public String getPathInfo() { return null; }&#10;        @Override public String getPathTranslated() { return null; }&#10;        @Override public String getContextPath() { return &quot;&quot;; }&#10;        @Override public String getQueryString() { return null; }&#10;        @Override public String getRemoteUser() { return null; }&#10;        @Override public boolean isUserInRole(String role) { return false; }&#10;        @Override public java.security.Principal getUserPrincipal() { return null; }&#10;        @Override public String getRequestedSessionId() { return null; }&#10;        @Override public String getRequestURI() { return &quot;/&quot;; }&#10;        @Override public StringBuffer getRequestURL() { return new StringBuffer(&quot;http://localhost/&quot;); }&#10;        @Override public String getServletPath() { return &quot;&quot;; }&#10;        @Override public jakarta.servlet.http.HttpSession getSession(boolean create) { return null; }&#10;        @Override public jakarta.servlet.http.HttpSession getSession() { return null; }&#10;        @Override public String changeSessionId() { return null; }&#10;        @Override public boolean isRequestedSessionIdValid() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromCookie() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromURL() { return false; }&#10;        @Override public boolean isRequestedSessionIdFromUrl() { return false; }&#10;        @Override public boolean authenticate(jakarta.servlet.http.HttpServletResponse response) { return false; }&#10;        @Override public void login(String username, String password) {}&#10;        @Override public void logout() {}&#10;        @Override public java.util.Collection&lt;jakarta.servlet.http.Part&gt; getParts() { return null; }&#10;        @Override public jakarta.servlet.http.Part getPart(String name) { return null; }&#10;        @Override public &lt;T extends jakarta.servlet.http.HttpUpgradeHandler&gt; T upgrade(Class&lt;T&gt; httpUpgradeHandlerClass) { return null; }&#10;        @Override public Object getAttribute(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getAttributeNames() { return null; }&#10;        @Override public String getCharacterEncoding() { return &quot;UTF-8&quot;; }&#10;        @Override public void setCharacterEncoding(String env) {}&#10;        @Override public int getContentLength() { return 0; }&#10;        @Override public long getContentLengthLong() { return 0; }&#10;        @Override public String getContentType() { return null; }&#10;        @Override public jakarta.servlet.ServletInputStream getInputStream() { return null; }&#10;        @Override public String[] getParameterValues(String name) { return null; }&#10;        @Override public java.util.Enumeration&lt;String&gt; getParameterNames() { return null; }&#10;        @Override public java.util.Map&lt;String, String[]&gt; getParameterMap() { return null; }&#10;        @Override public String getProtocol() { return &quot;HTTP/1.1&quot;; }&#10;        @Override public String getScheme() { return &quot;http&quot;; }&#10;        @Override public String getServerName() { return &quot;localhost&quot;; }&#10;        @Override public int getServerPort() { return 80; }&#10;        @Override public java.io.BufferedReader getReader() { return null; }&#10;        @Override public String getRemoteAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public String getRemoteHost() { return &quot;localhost&quot;; }&#10;        @Override public void setAttribute(String name, Object o) {}&#10;        @Override public void removeAttribute(String name) {}&#10;        @Override public java.util.Locale getLocale() { return null; }&#10;        @Override public java.util.Enumeration&lt;java.util.Locale&gt; getLocales() { return null; }&#10;        @Override public boolean isSecure() { return false; }&#10;        @Override public jakarta.servlet.RequestDispatcher getRequestDispatcher(String path) { return null; }&#10;        @Override public int getRemotePort() { return 0; }&#10;        @Override public String getLocalName() { return &quot;localhost&quot;; }&#10;        @Override public String getLocalAddr() { return &quot;127.0.0.1&quot;; }&#10;        @Override public int getLocalPort() { return 80; }&#10;        @Override public jakarta.servlet.ServletContext getServletContext() { return null; }&#10;        @Override public jakarta.servlet.AsyncContext startAsync() { return null; }&#10;        @Override public jakarta.servlet.AsyncContext startAsync(jakarta.servlet.ServletRequest servletRequest, jakarta.servlet.ServletResponse servletResponse) { return null; }&#10;        @Override public boolean isAsyncStarted() { return false; }&#10;        @Override public boolean isAsyncSupported() { return false; }&#10;        @Override public jakarta.servlet.AsyncContext getAsyncContext() { return null; }&#10;        @Override public jakarta.servlet.DispatcherType getDispatcherType() { return jakarta.servlet.DispatcherType.REQUEST; }&#10;        @Override public String getRealPath(String path) { return null; }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>